<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cooperxj.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
<meta property="og:type" content="website">
<meta property="og:title" content="Cooper Notes">
<meta property="og:url" content="http://cooperxj.github.io/page/5/index.html">
<meta property="og:site_name" content="Cooper Notes">
<meta property="og:description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Cooper">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://cooperxj.github.io/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Cooper Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Cooper Notes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">obey rules</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/spring%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/spring%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">Springå­¦ä¹ </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-27 22:23:56" itemprop="dateModified" datetime="2021-08-27T22:23:56+08:00">2021-08-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/spring%E5%AD%A6%E4%B9%A0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/spring%E5%AD%A6%E4%B9%A0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>431</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li>ideaæœ‰åç¼–è¯‘æºç çš„åŠŸèƒ½ å³ä½¿ä¸åœ¨mavenä¸­ä¸‹è½½æºç ä¹Ÿå¯ä»¥æŸ¥çœ‹æºç </li>
</ol>
<h3 id="beanå·¥å‚"><a href="#beanå·¥å‚" class="headerlink" title="beanå·¥å‚"></a>beanå·¥å‚</h3><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20210319093142.png" alt="image-20210319093127876" style="zoom:50%;" />

<ol>
<li><p>registeræ–¹æ³•çš„ä½œç”¨æ˜¯æ³¨å†Œspringä¸­çš„configç±»</p>
</li>
<li><p>refreshæ–¹æ³•æ˜¯æœ€é‡è¦çš„æ–¹æ³•ï¼Œä½œç”¨åœ¨äºå°†æ³¨å†Œçš„beanæ”¾åˆ°å·¥å‚ä¸­å»ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªmap â€“&gt; &lt;beanName,beanDefinition&gt;</p>
<p>å½“ç„¶æˆ‘ä»¬å¯ä»¥ç»§æ‰¿ä¸€äº›springä¸­çš„ç±»å»ç¼–å†™ä¸€ä¸ªæ³¨å†Œbeançš„æ–¹æ³•ï¼Œè‡ªå·±å®Œæˆbeançš„æ³¨å†Œè¿‡ç¨‹</p>
</li>
<li><p>æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„springå®¹å™¨åªæ˜¯ä¸€ä¸ªmapå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å•ä¾‹æ± </p>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20210319101306.png" alt="image-20210319101304751"></p>
<p>çœŸæ­£çš„springå®¹å™¨ç”±å¦‚ä¸‹ç»„æˆï¼š</p>
<ul>
<li>beanDefinition</li>
<li> beanFactoryPostProcess</li>
<li>beanDefinition Map</li>
<li>bean factory</li>
<li>singletonObjects</li>
</ul>
</li>
<li><p>springä¸­çš„ä¸€äº›æ³¨è§£ç±»ä¼¼äº@Autowired @Resource ç­‰éƒ½æ˜¯springçš„beanPostProcessorçš„å­ç±»å¯¹å…¶å®Œæˆæ“ä½œçš„</p>
<p>beanPostProcessoræ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç±»ï¼Œå°¤å…¶æ˜¯å…¶å­ç±»</p>
</li>
</ol>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/Spring%E4%BA%8B%E5%8A%A1%E5%A3%B0%E6%98%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/Spring%E4%BA%8B%E5%8A%A1%E5%A3%B0%E6%98%8E/" class="post-title-link" itemprop="url">Springäº‹åŠ¡å£°æ˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:42:55" itemprop="dateModified" datetime="2021-02-13T08:42:55+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/Spring%E4%BA%8B%E5%8A%A1%E5%A3%B0%E6%98%8E/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/Spring%E4%BA%8B%E5%8A%A1%E5%A3%B0%E6%98%8E/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>1.3k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="æœ¬è´¨"><a href="#æœ¬è´¨" class="headerlink" title="æœ¬è´¨"></a>æœ¬è´¨</h5><p>â€‹    å½“å¤„ç†ä¸€äº›äº‹åŠ¡çš„æ—¶å€™æœ‰å¯èƒ½ä¼šè¿ç»­æ‰§è¡Œå‡ ä¸ªæ­¥éª¤ï¼Œå…¶ä¸­ä»»ä½•ä¸€ä¸ªæ­¥éª¤å‡ºé”™éƒ½å¯¼è‡´æ•´ä¸ªæ­¥éª¤æ‰§è¡Œå¤±è´¥ã€‚</p>
<p>â€‹    æ¯”å¦‚è¯´æˆ‘æƒ³åœ¨æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡æ¶ˆæ¯å¹¶åˆ é™¤ä¸€æ¡æ¶ˆæ¯ï¼Œå¦‚æœåˆ é™¤æ¶ˆæ¯å¤±è´¥äº†ï¼Œé‚£ä¹ˆä¹Ÿå°†å¯¼è‡´æ’å…¥æ¶ˆæ¯å¤±è´¥ï¼Œè€Œä¸æ˜¯æ’å…¥æ¶ˆæ¯æˆåŠŸï¼Œåˆ é™¤æ¶ˆæ¯å¤±è´¥ã€‚</p>
<p>â€‹    <strong>ç›¸å½“äºä¿è¯åŸå­æ€§</strong></p>
<h5 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h5><ol>
<li><p>é…ç½®å£°æ˜å¼äº‹åŠ¡</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®å£°æ˜å¼äº‹åŠ¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<pre><code>2. ```xml
&lt;!--    ç»“åˆAOPå®ç°äº‹åŠ¡ç»‡å…¥--&gt;
&lt;!--    é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;
    &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;
&lt;!--        ç»™å“ªäº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;
&lt;!--        é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ new propagation=&amp;#45;&amp;#45;--&gt;
        &lt;tx:attributes&gt;
            &lt;tx:method name=&quot;add&quot; propagation=&quot;REQUIRED&quot;&gt;&lt;/tx:method&gt;
            &lt;tx:method name=&quot;query&quot; read-only=&quot;true&quot;&gt;&lt;/tx:method&gt;
            &lt;tx:method name=&quot;delete&quot; propagation=&quot;REQUIRED&quot;/&gt;
            &lt;tx:method name=&quot;update&quot; propagation=&quot;REQUIRED&quot;/&gt;
            &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt;
        &lt;/tx:attributes&gt;
    &lt;/tx:advice&gt;
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. é…ç½®äº‹åŠ¡åˆ‡å…¥</span><br><span class="line"></span><br><span class="line">   ```xml</span><br><span class="line">   &lt;!--    é…ç½®äº‹åŠ¡åˆ‡å…¥--&gt;</span><br><span class="line">       &lt;aop:config&gt;</span><br><span class="line">           &lt;aop:pointcut id=&quot;txPointCut&quot; expression=&quot;execution(* mapper.*.*(..))&quot;/&gt;</span><br><span class="line">           &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;txPointCut&quot;&gt;&lt;/aop:advisor&gt;</span><br><span class="line">       &lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>
</code></pre>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/SpringData/%E5%88%9D%E8%AF%86SpringData/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/SpringData/%E5%88%9D%E8%AF%86SpringData/" class="post-title-link" itemprop="url">SpringData</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:57:39" itemprop="dateModified" datetime="2021-02-13T08:57:39+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SpringData/" itemprop="url" rel="index"><span itemprop="name">SpringData</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/SpringData/%E5%88%9D%E8%AF%86SpringData/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/SpringData/%E5%88%9D%E8%AF%86SpringData/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>8.7k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>8 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="SpringDataå®šä¹‰"><a href="#SpringDataå®šä¹‰" class="headerlink" title="SpringDataå®šä¹‰"></a>SpringDataå®šä¹‰</h4><p>â€‹        Spring Data JPAæ˜¯ä¸€ç§JPAçš„æŠ½è±¡å±‚ï¼Œåº•å±‚ä¾èµ–Hibernateï¼Œä¹Ÿå°±æ˜¯ç»™æˆ‘ä»¬ç›´æ¥æä¾›äº†è®¿é—®æ•°æ®åº“çš„èƒ½åŠ›ï¼Œæ¯”å¦‚å¸¸è§çš„CRUDæ“ä½œï¼Œå¤æ‚çš„æ“ä½œè¿˜æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–å†™ã€‚</p>
<p>â€‹        å¯ä»¥è®¿é—®å…³ç³»å‹æ•°æ®åº“ä¹Ÿå¯ä»¥è®¿é—®NoSQLç±»å‹æ•°æ®åº“</p>
<p><strong>ä»¥å…³ç³»å‹æ•°æ®åº“ä¸ºä¾‹</strong></p>
<hr>
<h4 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h4><h5 id="1-å¯¼å…¥ä¾èµ–"><a href="#1-å¯¼å…¥ä¾èµ–" class="headerlink" title="1. å¯¼å…¥ä¾èµ–"></a>1. å¯¼å…¥ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-é…ç½®yamlæ–‡ä»¶ï¼ˆå› ä¸ºåº•å±‚æ˜¯hibernateå®ç°çš„ï¼Œæ‰€ä»¥éœ€è¦å£°æ˜ä¸€ä¸‹ï¼‰"><a href="#2-é…ç½®yamlæ–‡ä»¶ï¼ˆå› ä¸ºåº•å±‚æ˜¯hibernateå®ç°çš„ï¼Œæ‰€ä»¥éœ€è¦å£°æ˜ä¸€ä¸‹ï¼‰" class="headerlink" title="2. é…ç½®yamlæ–‡ä»¶ï¼ˆå› ä¸ºåº•å±‚æ˜¯hibernateå®ç°çš„ï¼Œæ‰€ä»¥éœ€è¦å£°æ˜ä¸€ä¸‹ï¼‰"></a>2. é…ç½®yamlæ–‡ä»¶ï¼ˆå› ä¸ºåº•å±‚æ˜¯hibernateå®ç°çš„ï¼Œæ‰€ä»¥éœ€è¦å£°æ˜ä¸€ä¸‹ï¼‰</h5><ul>
<li><p>ddl-auto:createâ€”-æ¯æ¬¡è¿è¡Œè¯¥ç¨‹åºï¼Œæ²¡æœ‰è¡¨æ ¼ä¼šæ–°å»ºè¡¨æ ¼ï¼Œè¡¨å†…æœ‰æ•°æ®ä¼šæ¸…ç©º</p>
</li>
<li><p>ddl-auto:create-dropâ€”-æ¯æ¬¡ç¨‹åºç»“æŸçš„æ—¶å€™ä¼šæ¸…ç©ºè¡¨</p>
</li>
<li><p>ddl-auto:updateâ€”-æ¯æ¬¡è¿è¡Œç¨‹åºï¼Œæ²¡æœ‰è¡¨æ ¼ä¼šæ–°å»ºè¡¨æ ¼ï¼Œè¡¨å†…æœ‰æ•°æ®ä¸ä¼šæ¸…ç©ºï¼Œåªä¼šæ›´æ–°(æ­¤æ¬¡çš„é€‰æ‹©)</p>
</li>
<li><p>ddl-auto:validateâ€”-è¿è¡Œç¨‹åºä¼šæ ¡éªŒæ•°æ®ä¸æ•°æ®åº“çš„å­—æ®µç±»å‹æ˜¯å¦ç›¸åŒï¼Œä¸åŒä¼šæŠ¥é”™</p>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">12345678</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">jpa:</span></span><br><span class="line">    <span class="attr">hibernate:</span></span><br><span class="line">      <span class="attr">ddl-auto:</span> <span class="string">update</span></span><br><span class="line">      <span class="attr">naming:</span></span><br><span class="line">        <span class="attr">physical-strategy:</span> <span class="string">org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy</span> <span class="comment"># é‡åˆ°å¤§å†™åŠ _</span></span><br><span class="line">    <span class="attr">show-sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h5 id="3-åˆ›å»ºå®ä½“ç±»"><a href="#3-åˆ›å»ºå®ä½“ç±»" class="headerlink" title="3. åˆ›å»ºå®ä½“ç±»"></a>3. åˆ›å»ºå®ä½“ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cooper.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table(name = &quot;user&quot;)</span><span class="comment">//å¦‚æœæ²¡æœ‰è¡¨åˆ™ä¼šåˆ›å»ºè¡¨ </span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GeneratedValue</span> <span class="comment">//è‡ªåŠ¨ç”Ÿæˆ</span></span><br><span class="line">    <span class="meta">@Id</span>  <span class="comment">//æŒ‡å®šä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4-ç»§æ‰¿Repositoryæ¥å£"><a href="#4-ç»§æ‰¿Repositoryæ¥å£" class="headerlink" title="4. ç»§æ‰¿Repositoryæ¥å£"></a>4. ç»§æ‰¿Repositoryæ¥å£</h5><p>â€‹        1. Repositoryæ¥å£æ˜¯ä¸€ä¸ªç©ºçš„æ ‡è®°æ¥å£ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ¥å£å¦‚æœç»§æ‰¿äº†è¯¥æ¥å£ï¼Œåˆ™è¯¥æ¥å£ä¼šè¢«IOCå®¹å™¨è¯†åˆ«ä¸ºä¸€ä¸ªRepository Beançº³å…¥åˆ°IOCå®¹å™¨ä¸­ï¼Œè¿›è€Œå¯ä»¥åœ¨è¯¥æ¥å£ä¸­å®šä¹‰<strong>æ»¡è¶³ä¸€å®šè§„èŒƒ</strong>çš„æ–¹æ³•</p>
<p>â€‹        2. å¯ä»¥é€šè¿‡æ³¨è§£æ›¿ä»£ç»§æ‰¿æ¥å£     <code>@RepositoryDefinition(domainClass = User.class,idClass = Integer.class)</code></p>
<p>Repository&lt;User,Integer&gt;  å…¶ä¸­<strong>Useræ˜¯å¤„ç†çš„å®ä½“ç±»çš„ç±»å‹ï¼ŒIntegerä¸ºä¸»é”®ç±»å‹</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonRepository</span> <span class="keyword">extends</span> <span class="title">Repository</span>&lt;<span class="title">User</span>,<span class="title">Integer</span>&gt; , <span class="title">PersonDao</span></span>&#123;</span><br><span class="line">    <span class="function">User <span class="title">getUserByName</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5-æµ‹è¯•"><a href="#5-æµ‹è¯•" class="headerlink" title="5. æµ‹è¯•"></a>5. æµ‹è¯•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testRepository</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    User user = repository.getUserByName(<span class="string">&quot;Cooper&quot;</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Repositoryæ–¹æ³•è§„èŒƒ"><a href="#Repositoryæ–¹æ³•è§„èŒƒ" class="headerlink" title="Repositoryæ–¹æ³•è§„èŒƒ"></a>Repositoryæ–¹æ³•è§„èŒƒ</h4><ol>
<li><p>éœ€è¦ç¬¦åˆä¸€å®šè§„èŒƒ</p>
</li>
<li><p>æŸ¥è¯¢æ–¹æ³•ä»¥find | read | getå¼€å¤´</p>
</li>
<li><p>æ¶‰åŠæ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œæ¡ä»¶çš„å±æ€§ç”¨æ¡ä»¶å…³é”®è¯è¿æ¥</p>
</li>
<li><p>æ¡ä»¶å±æ€§ä»¥é¦–å­—æ¯å¤§å†™å¼€å¤´</p>
</li>
<li><p>æ”¯æŒå±æ€§çš„çº§è”æŸ¥è¯¢ï¼Œè‹¥å½“å‰ç±»æœ‰ç¬¦åˆæ¡ä»¶çš„å±æ€§ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨ï¼Œè€Œä¸ä½¿ç”¨çº§è”å±æ€§ã€‚</p>
<p>å¦‚æœéœ€è¦ä½¿ç”¨çº§è”å±æ€§ï¼Œåˆ™å±æ€§ä¹‹é—´ä½¿ç”¨ â€œ_â€ è¿›è¡Œè¿æ¥</p>
<p>çº§è”å±æ€§ä¾‹å­</p>
<p>Userç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cooper.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table(name = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;ADDRESS_ID&quot;)</span></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Address <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(Address address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Addressç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cooper.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table(name = &quot;address&quot;)</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String addressName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddressName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> addressName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddressName</span><span class="params">(String addressName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.addressName = addressName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Address&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, addressName=&#x27;&quot;</span> + addressName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="Queryæ³¨è§£"><a href="#Queryæ³¨è§£" class="headerlink" title="@Queryæ³¨è§£"></a>@Queryæ³¨è§£</h4><p>ä½¿ç”¨è¯¥æ³¨è§£å¯ä»¥è‡ªå®šä¹‰æŸ¥è¯¢,ä½†æ˜¯éœ€è¦ä½¿ç”¨JPQLè¯­å¥</p>
<p>ğŸŒ°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(&quot;select p from User p where p.id=1 or 1=1&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨åŸç”ŸSQLè¯­å¥æŸ¥è¯¢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(value = &quot;select * from user&quot;,nativeQuery = true)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUsersByNative</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>å¸¦å‚æ•°æŸ¥è¯¢  å‚æ•°ä½¿ç”¨ ï¼Ÿåºå·  è¡¨ç¤º  ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯?1 ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(&quot;select p from User p where p.id=?1&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUsersByID</span><span class="params">(Integer id)</span></span>;</span><br></pre></td></tr></table></figure>

<p>æ¨¡ç³ŠæŸ¥è¯¢  ï¼ˆè®°ä½æŸ¥è¯¢è¯­å¥ä¸­å†™äº†%é‚£ä¹ˆè°ƒç”¨æ—¶å‚æ•°å°±ä¸éœ€è¦åŠ %ï¼Œå¦åˆ™éœ€è¦æ·»åŠ %ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Query(&quot;select p from User p where p.name like %?1%&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUsersByName</span><span class="params">(String name)</span></span>;</span><br></pre></td></tr></table></figure>



<h4 id="Modifying"><a href="#Modifying" class="headerlink" title="@Modifying"></a>@Modifying</h4><p>å¯ä»¥é€šè¿‡è‡ªå®šä¹‰JPQLå®Œæˆupdateå’Œdeleteæ“ä½œï¼Œä½†æ˜¯JPQLä¸æ”¯æŒinsertæ“ä½œ</p>
<p>æ¶‰åŠåˆ°updateå’Œdeleteæ“ä½œå¿…é¡»ä½¿ç”¨@modifyingæ³¨è§£ä»¥é€šçŸ¥SpringDataè¿™æ˜¯ä¸€ä¸ªupdateæˆ–deleteæ“ä½œ</p>
<p>æ¶‰åŠåˆ°updateå’Œdeleteæ“ä½œè¿˜å¿…é¡»æ·»åŠ äº‹åŠ¡ï¼Œæ­¤æ—¶éœ€è¦å®šä¹‰serviceå±‚ï¼Œåœ¨serviceå±‚ä¸Šæ·»åŠ äº‹åŠ¡</p>
<p>é»˜è®¤æƒ…å†µä¸‹Springdataçš„æ¯ä¸ªæ–¹æ³•ä¸Šéƒ½æœ‰äº‹åŠ¡ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªåªè¯»äº‹åŠ¡æ— æ³•å®Œæˆä¿®æ”¹å’Œåˆ é™¤æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Modifying</span></span><br><span class="line"><span class="meta">@Query(&quot;update User p set p.name=:name where p.id =:id&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span>String name,<span class="meta">@Param(&quot;id&quot;)</span>Integer id)</span></span>;</span><br></pre></td></tr></table></figure>

<p>serviceå±‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    PersonRepository personRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span>  <span class="comment">//ä¸€å®šè¦æ·»åŠ äº‹åŠ¡æ³¨è§£</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>&#123;</span><br><span class="line">        personRepository.updateUser(<span class="string">&quot;xyz&quot;</span>,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="CrudRepository"><a href="#CrudRepository" class="headerlink" title="CrudRepository"></a>CrudRepository</h4><p>ç»§æ‰¿è¯¥æ¥å£ä¹‹åå¯ä»¥æœ‰ä»¥ä¸‹æ–¹æ³•</p>
<img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200903101944.png" alt="image-20200903101937834" style="zoom:50%;" />

<p>æ¶‰åŠåˆ°updateã€saveã€è¿˜æœ‰deleteçš„æ“ä½œéƒ½éœ€è¦å®šä¹‰åˆ°servcieä¸­å¹¶ä½¿ç”¨äº‹åŠ¡è¿›è¡Œä¿®é¥°</p>
<p>ğŸŒ°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    PersonRepository personRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>&#123;</span><br><span class="line">        personRepository.updateUser(<span class="string">&quot;xyz&quot;</span>,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(<span class="number">3</span>);</span><br><span class="line">        user.setAge(<span class="number">10</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;xyz&quot;</span>);</span><br><span class="line">        Address address = <span class="keyword">new</span> Address();</span><br><span class="line">        address.setId(<span class="number">2</span>);</span><br><span class="line">        user.setAddress(address);</span><br><span class="line">        user.setAddressId(<span class="number">1</span>);</span><br><span class="line">        personRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>saveå°±æ˜¯å…ˆæ£€æŸ¥æ•°æ®åº“é‡è§†ä¼šå¦å«æœ‰è¯¥æ•°æ®ï¼Œå¦‚æœæœ‰åˆ™å¹¶ä¸”æœ‰ä¸åŒçš„åœ°æ–¹åˆ™æ›´æ–°è¯¥æ•°æ®ï¼Œå¦åˆ™æ·»åŠ ï¼Œç›¸å½“äºmergeæ“ä½œ</p>
<h4 id="PagingAndSortingRepository"><a href="#PagingAndSortingRepository" class="headerlink" title="PagingAndSortingRepository"></a>PagingAndSortingRepository</h4><p>ç»§æ‰¿è¯¥æ–¹æ³•åæœ‰ä»¥ä¸‹æ–¹æ³•</p>
<img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200903104242.png" alt="image-20200903102426373" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pageNo = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> pageSize = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å°è£… PageRequest å®ç°ç±»ï¼Œå…¶ä¸­åŒ…å«éœ€è¦åˆ†é¡µçš„ä¿¡æ¯</span></span><br><span class="line">    Sort sort = Sort.by(Sort.Direction.DESC,<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    Pageable pageable = PageRequest.of(pageNo,pageSize,sort);</span><br><span class="line"></span><br><span class="line">    Page&lt;User&gt; page = repository.findAll(pageable);</span><br><span class="line">    </span><br><span class="line">    System.out.println(page.getTotalElements());</span><br><span class="line">    System.out.println(page.getNumber());</span><br><span class="line">    System.out.println(page.getTotalPages());</span><br><span class="line">    System.out.println(page.getContent());</span><br><span class="line">    System.out.println(page.getNumberOfElements());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="JpaRepository"><a href="#JpaRepository" class="headerlink" title="JpaRepository"></a>JpaRepository</h4><p>PagingAndSortingRepositoryçš„å­æ¥å£ï¼Œåœ¨å…¶åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›æ–¹æ³•</p>
<img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200903104954.png" alt="image-20200903104711154" style="zoom:50%;" />



<h4 id="JpaSpecificationExecutor"><a href="#JpaSpecificationExecutor" class="headerlink" title="JpaSpecificationExecutor"></a>JpaSpecificationExecutor</h4><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200903111940.png" alt="image-20200903105905362" style="zoom:50%;" />

<p>å¯ä»¥å®ç°<strong>å¸¦æŸ¥è¯¢æ¡ä»¶</strong>çš„æŸ¥è¯¢</p>
<p>ä»¥å¸¦æŸ¥è¯¢æ¡ä»¶çš„åˆ†é¡µçš„ä¸ºä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pageNo = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> pageSize = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//å°è£… PageRequest å®ç°ç±»ï¼Œå…¶ä¸­åŒ…å«éœ€è¦åˆ†é¡µçš„ä¿¡æ¯</span></span><br><span class="line">    Sort sort = Sort.by(Sort.Direction.DESC,<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    Pageable pageable = PageRequest.of(pageNo,pageSize,sort);</span><br><span class="line"></span><br><span class="line">    Specification&lt;User&gt; specification = <span class="keyword">new</span> Specification&lt;User&gt;() &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> root ä»£è¡¨æŸ¥è¯¢çš„å®ä½“ç±»</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> criteriaQuery ä»ä¸­å¯ä»¥æŸ¥è¯¢åˆ°rootå¯¹è±¡ï¼Œå³å‘ŠçŸ¥ JPA criteriaæŸ¥è¯¢å“ªä¸€ä¸ªå®ä½“ç±»ï¼Œè¿˜å¯ä»¥æ·»åŠ cæŸ¥è¯¢æ¡ä»¶ï¼Œè¿˜å¯ä»¥ç»“åˆ</span></span><br><span class="line"><span class="comment">         *                      EntityManagerå¯¹è±¡å¾—åˆ°æœ€ç»ˆæŸ¥è¯¢çš„typeQueryå¯¹è±¡</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> criteriaBuilder åˆ›å»ºcriteriaå¯¹è±¡å·¥å‚ï¼Œå¯ä»¥ä»ä¸­è·å–çš„å¥¥predicateå¯¹è±¡</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;User&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder criteriaBuilder)</span> </span>&#123;</span><br><span class="line">            Path path = root.get(<span class="string">&quot;id&quot;</span>);<span class="comment">//è·å¾—å…·ä½“çš„æŸ¥è¯¢å¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§å¯¹è±¡çš„å“ªä¸ªå±æ€§è¿›è¡Œæ¡ä»¶åˆ¤æ–­</span></span><br><span class="line">            Predicate predicate = criteriaBuilder.gt(path,<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> predicate;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    Page&lt;User&gt; page = repository.findAll(specification,pageable);</span><br><span class="line"></span><br><span class="line">    System.out.println(page.getTotalElements());</span><br><span class="line">    System.out.println(page.getNumber());</span><br><span class="line">    System.out.println(page.getTotalPages());</span><br><span class="line">    System.out.println(page.getContent());</span><br><span class="line">    System.out.println(page.getNumberOfElements());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="è‡ªå®šä¹‰Repository"><a href="#è‡ªå®šä¹‰Repository" class="headerlink" title="è‡ªå®šä¹‰Repository"></a>è‡ªå®šä¹‰Repository</h4><h5 id="ä¸ºæŸä¸€ä¸ªRepositoryæ·»åŠ è‡ªå®šä¹‰çš„Repository"><a href="#ä¸ºæŸä¸€ä¸ªRepositoryæ·»åŠ è‡ªå®šä¹‰çš„Repository" class="headerlink" title="ä¸ºæŸä¸€ä¸ªRepositoryæ·»åŠ è‡ªå®šä¹‰çš„Repository"></a>ä¸ºæŸä¸€ä¸ªRepositoryæ·»åŠ è‡ªå®šä¹‰çš„Repository</h5><ol>
<li>å®šä¹‰ä¸€ä¸ªæ¥å£: å£°æ˜è¦æ·»åŠ çš„, å¹¶è‡ªå®ç°çš„æ–¹æ³•</li>
<li>æä¾›è¯¥æ¥å£çš„å®ç°ç±»: ç±»åéœ€åœ¨è¦å£°æ˜çš„ Repository åæ·»åŠ  Impl, å¹¶å®ç°æ–¹æ³•</li>
<li>å£°æ˜ Repository æ¥å£, å¹¶ç»§æ‰¿ 1) å£°æ˜çš„æ¥å£</li>
<li>ä½¿ç”¨.</li>
<li>æ³¨æ„: é»˜è®¤æƒ…å†µä¸‹, Spring Data ä¼šåœ¨ base-package ä¸­æŸ¥æ‰¾ â€œæ¥å£åImplâ€ ä½œä¸ºå®ç°ç±». ä¹Ÿå¯ä»¥é€šè¿‡ã€€repository-impl-postfixã€€å£°æ˜åç¼€.</li>
</ol>
<p>ğŸŒ°</p>
<p>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonRepositoryImpl</span> <span class="keyword">implements</span> <span class="title">PersonDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@PersistenceContext</span></span><br><span class="line">    EntityManager manager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        User user = manager.find(User.class, id);</span><br><span class="line">        System.out.println(<span class="string">&quot;method---&gt;&quot;</span>+user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>PersonRepositoryç»§æ‰¿è¯¥æ¥å£å³å¯è°ƒç”¨è‡ªå®šä¹‰Repositoryçš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonRepository</span> <span class="keyword">extends</span> <span class="title">Repository</span>&lt;<span class="title">User</span>,<span class="title">Integer</span>&gt; , <span class="title">PersonDao</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testPersonDao</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    repository.test(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><font color=red><strong>æ³¨æ„ç‚¹</strong></font>ï¼š</p>
<p>â€‹    å‘½åå¿…é¡»ç¬¦åˆå£°æ˜ä½¿ç”¨çš„Repositoryæ¥å£å+Impl</p>
<p>â€‹    åœ¨æœ¬ä¾‹ä¸­ä¹Ÿå°±æ˜¯PersonRepository+Impl å³ PersonRepositoryImplï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<p>â€‹    è‡ªå®šä¹‰çš„æ¥å£åæœ€å¥½ä¹Ÿä¸å£°æ˜ä½¿ç”¨çš„Repositoryä¿æŒä¸€è‡´ä¹Ÿå°±æ˜¯æ­¤å¤„çš„PersonDaoï¼Œå½“ç„¶å¯ä»¥å†™æˆå…¶ä»–çš„åç§°</p>
<p>â€‹    </p>
<h5 id="ä¸ºæ‰€æœ‰çš„-Repository-éƒ½æ·»åŠ è‡ªå®ç°çš„æ–¹æ³•"><a href="#ä¸ºæ‰€æœ‰çš„-Repository-éƒ½æ·»åŠ è‡ªå®ç°çš„æ–¹æ³•" class="headerlink" title="ä¸ºæ‰€æœ‰çš„ Repository éƒ½æ·»åŠ è‡ªå®ç°çš„æ–¹æ³•"></a>ä¸ºæ‰€æœ‰çš„ Repository éƒ½æ·»åŠ è‡ªå®ç°çš„æ–¹æ³•</h5><ul>
<li>æ­¥éª¤ï¼š</li>
</ul>
<ol>
<li>å£°æ˜ä¸€ä¸ªæ¥å£, åœ¨è¯¥æ¥å£ä¸­å£°æ˜éœ€è¦è‡ªå®šä¹‰çš„æ–¹æ³•, ä¸”è¯¥æ¥å£éœ€è¦ç»§æ‰¿ Spring Data çš„ Repository.</li>
<li>æä¾› 1) æ‰€å£°æ˜çš„æ¥å£çš„å®ç°ç±». ä¸”ç»§æ‰¿ SimpleJpaRepository, å¹¶æä¾›æ–¹æ³•çš„å®ç°</li>
<li>å®šä¹‰ JpaRepositoryFactoryBean çš„å®ç°ç±», ä½¿å…¶ç”Ÿæˆ 1) å®šä¹‰çš„æ¥å£å®ç°ç±»çš„å¯¹è±¡</li>
<li>ä¿®æ”¹ &lt;jpa:repositories /&gt; èŠ‚ç‚¹çš„ factory-class å±æ€§æŒ‡å‘ 3) çš„å…¨ç±»å</li>
<li>æ³¨æ„: å…¨å±€çš„æ‰©å±•å®ç°ç±»ä¸è¦ç”¨ Imp ä½œä¸ºåç¼€å, æˆ–ä¸ºå…¨å±€æ‰©å±•æ¥å£æ·»åŠ  @NoRepositoryBean æ³¨è§£å‘ŠçŸ¥ Spring Data: Spring Data ä¸æŠŠå…¶ä½œä¸º Repository</li>
</ol>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/" class="post-title-link" itemprop="url">æœªå‘½å</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-27 16:02:08" itemprop="dateModified" datetime="2021-08-27T16:02:08+08:00">2021-08-27</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>292</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ä½¿ç”¨elasticdump/elasticsearch-dump ï¼ˆ<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/elasticdump%EF%BC%89">https://www.npmjs.com/package/elasticdumpï¼‰</a></p>
<p>å¯ä»¥é€šè¿‡dockeræˆ–è€…npmè¿›è¡Œè¿ç§»æ•°æ®</p>
<ul>
<li><p>æ•°æ®ä»æœ¬åœ°å¯¼å…¥åˆ°es</p>
<p><code>docker run --rm -ti -v /root:/tmp elasticdump/elasticsearch-dump   --output=http://172.23.27.120:9201/communtiy   --input=/tmp/result.json   --type=data</code></p>
<p>/rootè·¯å¾„ä¸‹æœ‰å¯¹åº”çš„resultæ–‡ä»¶ï¼Œç›¸å½“äºæŠŠ/rootä¸‹çš„æ–‡ä»¶éƒ½æ˜ å°„åˆ°å®¹å™¨å†…çš„/tmpè·¯å¾„ä¸‹</p>
</li>
<li></li>
</ul>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%B8%B8%E8%A7%81%E6%8C%87%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%B8%B8%E8%A7%81%E6%8C%87%E4%BB%A4/" class="post-title-link" itemprop="url">æœªå‘½å</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-12-17 11:06:56" itemprop="dateModified" datetime="2021-12-17T11:06:56+08:00">2021-12-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%B8%B8%E8%A7%81%E6%8C%87%E4%BB%A4/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%B8%B8%E8%A7%81%E6%8C%87%E4%BB%A4/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>661</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>dockerå¯åŠ¨es</p>
<p><code>docker run -e ES_JAVA_OPTS=&quot;-Xms256m -Xmx256m&quot; -d -p 9200:9200 -p 9300:9300 -v /usr/local/120_service/services/es/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /usr/local/120_service/services/es/data:/usr/share/elasticsearch/data -v /usr/local/120_service/services/es/plugins:/usr/share/elasticsearch/plugins --name elastic elasticsearch:7.6.2</code></p>
</li>
<li><p>æŸ¥çœ‹æ‰€æœ‰ç´¢å¼•</p>
<p>curl â€˜172.23.27.120:9200/_cat/INDICES?vâ€™</p>
</li>
<li><p>åˆ é™¤ç´¢å¼•</p>
<p>curl -XDELETE <a target="_blank" rel="noopener" href="http://172.23.27.120:9201/%7Bindex_name%7D">http://172.23.27.120:9201/{index_name}</a></p>
</li>
<li><p>æŸ¥çœ‹ç´¢å¼•å­—æ®µ</p>
<p>curl -XGET â€˜172.23.27.120:9201/community/_mapping?prettyâ€™ -H â€˜Content-Type:application/jsonâ€™</p>
</li>
<li><p>æŸ¥çœ‹æ•°æ®</p>
<p>curl -XGET â€˜172.23.27.120:9200/communtiy/_search?prettyâ€™ -H â€˜Content-Type:application/jsonâ€™</p>
</li>
</ol>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%88%9D%E8%AF%86ElasticSearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%88%9D%E8%AF%86ElasticSearch/" class="post-title-link" itemprop="url">åˆè¯†ElasticSearch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:32:12" itemprop="dateModified" datetime="2021-02-13T08:32:12+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ElasticSearch/" itemprop="url" rel="index"><span itemprop="name">ElasticSearch</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%88%9D%E8%AF%86ElasticSearch/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/%E5%88%9D%E8%AF%86ElasticSearch/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>15 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><blockquote>
<p>elasticsearch:</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">å®‰è£…ï¼š</span></span><br><span class="line">     <span class="attr">1</span> <span class="string">è§£å‹ï¼Œ</span></span><br><span class="line">     <span class="attr">2</span> <span class="string">bin</span></span><br><span class="line">     <span class="attr">3</span> <span class="string">å¯åŠ¨</span></span><br><span class="line"><span class="attr">ç›®å½•ï¼š</span></span><br><span class="line">     <span class="attr">bin</span> <span class="string">å¯åŠ¨æ–‡ä»¶</span></span><br><span class="line">     <span class="attr">config</span> <span class="string">é…ç½®æ–‡ä»¶</span></span><br><span class="line">         <span class="attr">log4j2</span> <span class="string">æ—¥å¿—é…ç½®æ–‡ä»¶</span></span><br><span class="line">         <span class="meta">jvm.options</span> <span class="string">java è™šæ‹Ÿæœºç›¸å…³çš„é…ç½®</span></span><br><span class="line">         <span class="meta">elasticsearch.yml</span> <span class="string">elasticsearch çš„é…ç½®æ–‡ä»¶ï¼ é»˜è®¤ 9200 ç«¯å£ï¼ è·¨åŸŸï¼</span></span><br><span class="line">         <span class="attr">lib</span> <span class="string">ç›¸å…³jaråŒ…</span></span><br><span class="line">         <span class="attr">logs</span> <span class="string">æ—¥å¿—ï¼</span></span><br><span class="line">         <span class="attr">modules</span> <span class="string">åŠŸèƒ½æ¨¡å—</span></span><br><span class="line">         <span class="attr">plugins</span> <span class="string">æ’ä»¶ï¼</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®‰è£…å¯è§†åŒ–æ’ä»¶ï¼š</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">å®‰è£…ï¼š</span></span><br><span class="line">          <span class="attr">1</span> <span class="string">elasticsearch-head-masterï¼Œè§£å‹</span></span><br><span class="line">          <span class="attr">2</span> <span class="string">npm install npm run start ï¼Œ éœ€è¦nodeç¯å¢ƒ</span></span><br><span class="line">          <span class="attr">3</span> <span class="string">è§£å†³è·¨åŸŸé—®é¢˜ï¼Œelasticsearch-&gt;config-&gt;elasticsearch.ymlé…ç½®ï¼š</span></span><br><span class="line">             <span class="meta">http.cors.enabled</span>: <span class="string">true</span></span><br><span class="line">             <span class="meta">http.cors.allow-origin</span>: <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Kibana:</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1ã€è§£å‹åç«¯çš„ç›®å½•</span></span><br><span class="line"><span class="attr">2ã€å¯åŠ¨</span></span><br><span class="line"><span class="attr">3ã€è®¿é—®æµ‹è¯•</span></span><br><span class="line"><span class="meta">4ã€å¼€å‘å·¥å…·ï¼</span> <span class="string">ï¼ˆPostã€curlã€headã€è°·æ­Œæµè§ˆå™¨æ’ä»¶æµ‹è¯•ï¼ï¼‰</span></span><br><span class="line"><span class="meta">5ã€æ±‰åŒ–,i18n.locale</span>: <span class="string">&quot;zh-CN&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="ESæ ¸å¿ƒæ¦‚å¿µ"><a href="#ESæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ESæ ¸å¿ƒæ¦‚å¿µ"></a>ESæ ¸å¿ƒæ¦‚å¿µ</h3><blockquote>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203156.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203203.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h2 id="IKåˆ†è¯å™¨æ’ä»¶-å¯ä»¥æ·»åŠ è‡ªå·±çš„è¯å…¸"><a href="#IKåˆ†è¯å™¨æ’ä»¶-å¯ä»¥æ·»åŠ è‡ªå·±çš„è¯å…¸" class="headerlink" title="IKåˆ†è¯å™¨æ’ä»¶(å¯ä»¥æ·»åŠ è‡ªå·±çš„è¯å…¸)"></a>IKåˆ†è¯å™¨æ’ä»¶(å¯ä»¥æ·»åŠ è‡ªå·±çš„è¯å…¸)</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">å®‰è£…ï¼š</span></span><br><span class="line">	<span class="meta">1ã€https</span>:<span class="string">//github.com/medcl/elasticsearch-analysis-ik</span></span><br><span class="line">	<span class="meta">2ã€ä¸‹è½½å®Œæ¯•ä¹‹åï¼Œæ”¾å…¥åˆ°æˆ‘ä»¬çš„elasticsearch</span> <span class="string">æ’ä»¶,pluginsç›®å½•</span></span><br><span class="line">	<span class="attr">3ã€é‡å¯è§‚å¯ŸESï¼Œå¯ä»¥çœ‹åˆ°ikåˆ†è¯å™¨è¢«åŠ è½½äº†ï¼</span></span><br><span class="line">	<span class="meta">4ã€elasticsearch-plugin</span> <span class="string">å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹åŠ è½½è¿›æ¥çš„æ’ä»¶</span></span><br><span class="line">	<span class="attr">5ã€ä½¿ç”¨kibanaæµ‹è¯•ï¼</span></span><br><span class="line"><span class="attr">å…¶ä»–ï¼š</span></span><br><span class="line">	<span class="attr">ik_smart</span> <span class="string">å’Œ ik_max_wordï¼Œå…¶ä¸­ ik_smart ä¸ºæœ€å°‘åˆ‡åˆ†ï¼Œik_max_wordä¸ºæœ€ç»† ç²’åº¦åˆ’åˆ†ï¼</span></span><br><span class="line">	<span class="meta">config/IKAnalyzer.cfg.xml</span>  <span class="string">æ·»åŠ åŠ è½½åˆ†è¯è§„åˆ™ï¼Œmain.dicé»˜è®¤åŠ è½½ (å¿…å®šæ·»åŠ main)</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>method</th>
<th>urlåœ°å€</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>PUT</td>
<td>localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id</td>
<td>åˆ›å»ºæ–‡æ¡£ï¼ˆæŒ‡å®šæ–‡æ¡£idï¼‰</td>
</tr>
<tr>
<td>POST</td>
<td>localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°</td>
<td>åˆ›å»ºæ–‡æ¡£ï¼ˆéšæœºæ–‡æ¡£idï¼‰</td>
</tr>
<tr>
<td>_update</td>
<td>llocalhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id/_update</td>
<td>ä¿®æ”¹æ–‡æ¡£</td>
</tr>
<tr>
<td>DELETE</td>
<td>localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id</td>
<td>åˆ é™¤æ–‡æ¡£</td>
</tr>
<tr>
<td>GET</td>
<td>localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/æ–‡æ¡£id</td>
<td>æŸ¥è¯¢æ–‡æ¡£é€šè¿‡æ–‡æ¡£id</td>
</tr>
<tr>
<td>POST</td>
<td>localhost:9200/ç´¢å¼•åç§°/ç±»å‹åç§°/_search</td>
<td>æŸ¥è¯¢æ‰€æœ‰æ•°æ®</td>
</tr>
</tbody></table>
<h3 id="æ„å»ºè‡ªå·±çš„å­—å…¸"><a href="#æ„å»ºè‡ªå·±çš„å­—å…¸" class="headerlink" title="æ„å»ºè‡ªå·±çš„å­—å…¸"></a>æ„å»ºè‡ªå·±çš„å­—å…¸</h3><p>ä½¿å¾—ç‹‚ç¥è¯´ æˆä¸ºä¸€ä¸ªè¯ã€‚<br>5.1æ–°å¢ä¸€ä¸ª â€œcyx.dicâ€<br><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203222.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203237.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="æŠŠè‡ªå·±çš„dic-æ·»åŠ åˆ°é…ç½®ä¸­"><a href="#æŠŠè‡ªå·±çš„dic-æ·»åŠ åˆ°é…ç½®ä¸­" class="headerlink" title="æŠŠè‡ªå·±çš„dic æ·»åŠ åˆ°é…ç½®ä¸­"></a>æŠŠè‡ªå·±çš„dic æ·»åŠ åˆ°é…ç½®ä¸­</h3><p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203302.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203309.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="é‡å¯-elasticsearchå’Œkibana"><a href="#é‡å¯-elasticsearchå’Œkibana" class="headerlink" title="é‡å¯ elasticsearchå’Œkibana"></a>é‡å¯ elasticsearchå’Œkibana</h3><p>åŠ è½½äº†ç¼–å†™çš„dic<br><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203317.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‡æ–°ç¼–è¯‘ï¼Œè¿™ä¸¤ä¸ªéƒ½æŠŠç‹‚ç¥è¯´åˆåœ¨ä¸€èµ·ä½œä¸ºä¸€ä¸ªè¯</p>
<h2 id="apiæ“ä½œ"><a href="#apiæ“ä½œ" class="headerlink" title="apiæ“ä½œ"></a>apiæ“ä½œ</h2><h3 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PUT /zgc/user/<span class="number">1</span>    <span class="comment">//æ­¤å¤„ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å°è£…å¥½æ¯ä¸ªfieldå¯¹äºçš„ç±»å‹  ä¸éœ€è¦æˆ‘ä»¬æŒ‡å®šç±»å‹  æ¯”å¦‚ageå°±é»˜è®¤å°è£…ä¸ºlongç±»å‹</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚ç¥è¯´java&quot;</span>,</span><br><span class="line"><span class="string">&quot;age&quot;</span> : <span class="number">10</span>,</span><br><span class="line"><span class="string">&quot;desc&quot;</span>: <span class="string">&quot;è¿˜è¡Œ&quot;</span>,</span><br><span class="line"><span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;æŠ€æœ¯å®…&quot;</span>,<span class="string">&quot;å¸…å“¥&quot;</span>,<span class="string">&quot;æ¸£ç”·&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="PUTæ›´æ–°"><a href="#PUTæ›´æ–°" class="headerlink" title="PUTæ›´æ–°"></a>PUTæ›´æ–°</h3><p><strong>ç©ºçš„å­—æ®µä¼šè¦†ç›–ï¼Œä¸æ¨è</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PUT /zgc/user/<span class="number">1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚ç¥è¯´123&quot;</span>,</span><br><span class="line"><span class="string">&quot;desc&quot;</span>: <span class="string">&quot;ä¸€é¡¿æ“ä½œçŒ›å¦‚è™ï¼Œä¸€çœ‹å·¥èµ„2500&quot;</span>,</span><br><span class="line"><span class="string">&quot;tags&quot;</span>: [<span class="string">&quot;æŠ€æœ¯å®…&quot;</span>,<span class="string">&quot;æ¸©æš–&quot;</span>,<span class="string">&quot;ç›´ç”·&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="POSTæ›´æ–°"><a href="#POSTæ›´æ–°" class="headerlink" title="POSTæ›´æ–°"></a>POSTæ›´æ–°</h3><p><strong>çµæ´»ï¼Œæ¨è</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /zgc/user/<span class="number">1</span>/_update</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;doc&quot;</span>:&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚ç¥è¯´222222&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç®€å•æŸ¥è¯¢"><a href="#ç®€å•æŸ¥è¯¢" class="headerlink" title="ç®€å•æŸ¥è¯¢"></a>ç®€å•æŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/<span class="number">1</span>  <span class="comment">//æŸ¥è¯¢zgcä¸­id=1çš„æ–‡æ¡£</span></span><br><span class="line"></span><br><span class="line">GET /test  <span class="comment">//æŸ¥è¯¢teståº“çš„ä¿¡æ¯</span></span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /test  <span class="comment">//åˆ é™¤teståº“</span></span><br></pre></td></tr></table></figure>



<h4 id="1-åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†"><a href="#1-åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†" class="headerlink" title="1. åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†"></a>1. åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢æ–‡æ¡£1ã€2</span></span><br><span class="line">POST /zgc/user/_search?q=name:ç‹‚ç¥è¯´java</span><br></pre></td></tr></table></figure>

<h4 id="2-åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†"><a href="#2-åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†" class="headerlink" title="2. åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†"></a>2. åˆ†è¯å¹¶ä¸”æœç´¢è¯æ‹†åˆ†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚ç¥è¯´&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="sourceæŒ‡å®šå­—æ®µ-sortæ’åº"><a href="#sourceæŒ‡å®šå­—æ®µ-sortæ’åº" class="headerlink" title="_sourceæŒ‡å®šå­—æ®µ,sortæ’åº"></a>_sourceæŒ‡å®šå­—æ®µ,sortæ’åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚ç¥è¯´&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  , <span class="string">&quot;_source&quot;</span>: [<span class="string">&quot;name&quot;</span>,<span class="string">&quot;tags&quot;</span>,<span class="string">&quot;age&quot;</span>]</span><br><span class="line">  ,<span class="string">&quot;sort&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;age&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;order&quot;</span>: <span class="string">&quot;asc&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">  ,<span class="string">&quot;from&quot;</span>: <span class="number">0</span></span><br><span class="line">  ,<span class="string">&quot;size&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="must-ï¼ˆandï¼‰ï¼Œshould-ï¼ˆorï¼‰ï¼Œmust-not-ï¼ˆnotï¼‰"><a href="#must-ï¼ˆandï¼‰ï¼Œshould-ï¼ˆorï¼‰ï¼Œmust-not-ï¼ˆnotï¼‰" class="headerlink" title="must ï¼ˆandï¼‰ï¼Œshould ï¼ˆorï¼‰ï¼Œmust_not ï¼ˆnotï¼‰"></a>must ï¼ˆandï¼‰ï¼Œshould ï¼ˆorï¼‰ï¼Œmust_not ï¼ˆnotï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;bool&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;must_not&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;java&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;age&quot;</span>: <span class="string">&quot;10&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŒ¹é…å¤šä¸ªå€¼-orå¹¶ä¸”æœç´¢è¯æ‹†åˆ†"><a href="#åŒ¹é…å¤šä¸ªå€¼-orå¹¶ä¸”æœç´¢è¯æ‹†åˆ†" class="headerlink" title="åŒ¹é…å¤šä¸ªå€¼ orå¹¶ä¸”æœç´¢è¯æ‹†åˆ†"></a>åŒ¹é…å¤šä¸ªå€¼ orå¹¶ä¸”æœç´¢è¯æ‹†åˆ†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;tags&quot;</span>: <span class="string">&quot;ç”·  å¸…å“¥&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="term-â€ä¸èƒ½æŠŠæœç´¢è¯æ‹†åˆ†â€œ-å¦‚æœè¯¥å­—æ®µçš„å±æ€§æ˜¯keywordçš„è¯ï¼Œä½†æ˜¯å¦‚æœä¸ºtextï¼Œæ˜¯å¯ä»¥è°ƒç”¨åˆ†è¯å™¨è¿›è¡Œæ‹†åˆ†åè¿›è¡ŒæŸ¥æ‰¾"><a href="#term-â€ä¸èƒ½æŠŠæœç´¢è¯æ‹†åˆ†â€œ-å¦‚æœè¯¥å­—æ®µçš„å±æ€§æ˜¯keywordçš„è¯ï¼Œä½†æ˜¯å¦‚æœä¸ºtextï¼Œæ˜¯å¯ä»¥è°ƒç”¨åˆ†è¯å™¨è¿›è¡Œæ‹†åˆ†åè¿›è¡ŒæŸ¥æ‰¾" class="headerlink" title="term â€ä¸èƒ½æŠŠæœç´¢è¯æ‹†åˆ†â€œ(å¦‚æœè¯¥å­—æ®µçš„å±æ€§æ˜¯keywordçš„è¯ï¼Œä½†æ˜¯å¦‚æœä¸ºtextï¼Œæ˜¯å¯ä»¥è°ƒç”¨åˆ†è¯å™¨è¿›è¡Œæ‹†åˆ†åè¿›è¡ŒæŸ¥æ‰¾)"></a>term â€ä¸èƒ½æŠŠæœç´¢è¯æ‹†åˆ†â€œ(å¦‚æœè¯¥å­—æ®µçš„å±æ€§æ˜¯keywordçš„è¯ï¼Œä½†æ˜¯å¦‚æœä¸ºtextï¼Œæ˜¯å¯ä»¥è°ƒç”¨åˆ†è¯å™¨è¿›è¡Œæ‹†åˆ†åè¿›è¡ŒæŸ¥æ‰¾)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;term&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="filter-è¿‡æ»¤å™¨"><a href="#filter-è¿‡æ»¤å™¨" class="headerlink" title="filter:è¿‡æ»¤å™¨"></a>filter:è¿‡æ»¤å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># query-&gt;bool-&gt;filter</span><br><span class="line"># filteræ¯”queryå¿«çš„åŸå› ï¼š</span><br><span class="line"># <span class="number">1</span> query:ä¼šå…ˆæ¯”è¾ƒæŸ¥è¯¢æ¡ä»¶ï¼Œç„¶åè®¡ç®—åˆ†å€¼ï¼Œæœ€åè¿”å›æ–‡æ¡£ç»“æœï¼›filter: <span class="number">1</span> å¯¹ç»“æœè¿›è¡Œç¼“å­˜ <span class="number">2</span> é¿å…è®¡ç®—åˆ†å€¼</span><br><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;bool&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;filter&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;range&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;age&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;gte&quot;</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="string">&quot;lte&quot;</span>: <span class="number">200</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é«˜äº®æŸ¥è¯¢"><a href="#é«˜äº®æŸ¥è¯¢" class="headerlink" title="é«˜äº®æŸ¥è¯¢"></a>é«˜äº®æŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚ç¥&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ,<span class="string">&quot;highlight&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;fields&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>:&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰é«˜äº®æŸ¥è¯¢"><a href="#è‡ªå®šä¹‰é«˜äº®æŸ¥è¯¢" class="headerlink" title="è‡ªå®šä¹‰é«˜äº®æŸ¥è¯¢"></a>è‡ªå®šä¹‰é«˜äº®æŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GET /zgc/user/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ç‹‚ç¥&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ,<span class="string">&quot;highlight&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;fields&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>:&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ,<span class="string">&quot;pre_tags&quot;</span>: <span class="string">&quot;&lt;p class=&#x27;key&#x27; style=&#x27;color:red&#x27; &gt;&quot;</span></span><br><span class="line">    ,<span class="string">&quot;post_tags&quot;</span>: <span class="string">&quot;&lt;/p&gt;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="termå’Œmatch"><a href="#termå’Œmatch" class="headerlink" title="termå’Œmatch"></a><font color=red>termå’Œmatch</font></h3><ul>
<li>termæ˜¯ç²¾ç¡®æŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯ä¼šæ ¹æ®å­—æ®µçš„ç±»å‹ï¼ˆæ¯”å¦‚è¯´name:text,desc:keywordï¼‰</li>
</ul>
<p>é‚£ä¹ˆä½¿ç”¨termæŸ¥è¯¢nameçš„æ—¶å€™å°±ä¼šè°ƒç”¨åˆ†è¯å™¨è§£æåå¯¹nameè¿›è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯å¯¹äºdescæŸ¥è¯¢çš„æ—¶å€™å°±ä¼šæƒ³descçš„å†…å®¹å½“ä½œæ•´ä½“ï¼Œä¸ä½¿ç”¨åˆ†è¯å™¨è¿›è¡Œåˆ†è¯æŸ¥è¯¢ï¼Œè€Œæ˜¯ä½œä¸ºæ•´ä½“æŸ¥è¯¢</p>
<ul>
<li><p>match</p>
<p>ä½¿ç”¨åˆ†è¯å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸ç®¡å­—æ®µçš„ç±»å‹æ—¶textè¿˜æ˜¯keywordéƒ½ä½¿ç”¨åˆ†è¯å™¨è§£æä¹‹åè¿›è¡ŒæŸ¥è¯¢</p>
</li>
</ul>
<h3 id="é›†æˆSpringBoot"><a href="#é›†æˆSpringBoot" class="headerlink" title="é›†æˆSpringBoot"></a>é›†æˆSpringBoot</h3><p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/client/index.html">https://www.elastic.co/guide/en/elasticsearch/client/index.html</a><br><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203327.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203336.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><p>&lt;elasticsearch.version&gt;7.6.1&lt;/elasticsearch.version&gt;</p>
<h3 id="springbooté…ç½®"><a href="#springbooté…ç½®" class="headerlink" title="springbooté…ç½®"></a>springbooté…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–°å»ºElasticSearchClientConfigæ–‡ä»¶</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElasticSearchClientConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestHighLevelClient <span class="title">restHighLevelClient</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        RestHighLevelClient client = <span class="keyword">new</span> RestHighLevelClient(</span><br><span class="line">                RestClient.builder(</span><br><span class="line">                        <span class="keyword">new</span> HttpHost(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">9200</span>, <span class="string">&quot;http&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">return</span> client;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒ…ï¼Œæœautoconfigure-&gt;æœelasticearch-&gt;ElasticsearchRestClientAutoConfiguration</p>
<p>@Import({RestClientBuilderConfiguration.class, RestHighLevelClientConfiguration.class, RestClientFallbackConfiguration.class})</p>
<h3 id="ç´¢å¼•æ“ä½œ"><a href="#ç´¢å¼•æ“ä½œ" class="headerlink" title="ç´¢å¼•æ“ä½œ"></a>ç´¢å¼•æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestHighLevelClient restHighLevelClient;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç´¢å¼•</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	CreateIndexRequest createIndexRequest = <span class="keyword">new</span> CreateIndexRequest(<span class="string">&quot;zgc_index&quot;</span>);</span><br><span class="line">	CreateIndexResponse createIndexResponse = restHighLevelClient.indices().create(createIndexRequest, RequestOptions.DEFAULT);</span><br><span class="line">	System.out.println(createIndexResponse);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//org.elasticsearch.client.indices.CreateIndexResponse@998a69c8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ¤æ–­ç´¢å¼•æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">existIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	GetIndexRequest getIndexRequest = <span class="keyword">new</span> GetIndexRequest(<span class="string">&quot;zgc_index&quot;</span>);</span><br><span class="line">	<span class="keyword">boolean</span> exists = restHighLevelClient.indices().exists(getIndexRequest, RequestOptions.DEFAULT);</span><br><span class="line">	System.out.println(exists);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ç´¢å¼•</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	DeleteIndexRequest deleteIndexRequest = <span class="keyword">new</span> DeleteIndexRequest(<span class="string">&quot;zgc_index&quot;</span>);</span><br><span class="line">	AcknowledgedResponse delete = restHighLevelClient.indices().delete(deleteIndexRequest, RequestOptions.DEFAULT);</span><br><span class="line">	System.out.println(delete);</span><br><span class="line">	System.out.println(delete.isAcknowledged());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//org.elasticsearch.action.support.master.AcknowledgedResponse@4ee</span></span><br><span class="line"><span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="æ–‡æ¡£æ“ä½œ"><a href="#æ–‡æ¡£æ“ä½œ" class="headerlink" title="æ–‡æ¡£æ“ä½œ"></a>æ–‡æ¡£æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ç±»</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ElasticsearchApplicationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;restHighLevelClient&quot;)</span>  <span class="comment">//æŒ‡æ˜æ­¤å¤„æ˜¯è·å–çš„æˆ‘ä»¬è‡ªå·±é…ç½®çš„RestHighLevelClientå¯¹è±¡</span></span><br><span class="line">    RestHighLevelClient restHighLevelClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•ç´¢å¼•çš„åˆ›å»º</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//è·å–åˆ›å»ºç´¢å¼•çš„è¯·æ±‚</span></span><br><span class="line">        CreateIndexRequest request = <span class="keyword">new</span> CreateIndexRequest(<span class="string">&quot;cooper_index&quot;</span>);</span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯æ‰§è¡Œè¯·æ±‚ IndicesClient è¯·æ±‚åè·å¾—å“åº”</span></span><br><span class="line">        CreateIndexResponse response = restHighLevelClient.indices().create(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•è·å–ç´¢å¼•</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        GetIndexRequest request = <span class="keyword">new</span> GetIndexRequest(<span class="string">&quot;cooper_index&quot;</span>);</span><br><span class="line">        <span class="keyword">boolean</span> exists = restHighLevelClient.indices().exists(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(exists);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•åˆ é™¤ç´¢å¼•</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        DeleteIndexRequest request = <span class="keyword">new</span> DeleteIndexRequest(<span class="string">&quot;cooper_index&quot;</span>);</span><br><span class="line">        AcknowledgedResponse response = restHighLevelClient.indices().delete(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(response.isAcknowledged());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•æ·»åŠ æ–‡æ¡£</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAddDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;cooper&quot;</span>,<span class="number">22</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¯·æ±‚</span></span><br><span class="line">        IndexRequest request = <span class="keyword">new</span> IndexRequest(<span class="string">&quot;cooper_index&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è§„åˆ™ put/cooper_index/_doc/1</span></span><br><span class="line">        request.id(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        request.timeout(<span class="string">&quot;1s&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°†æ•°æ®è¯·æ±‚æ”¾å…¥åˆ°jsonä¸­</span></span><br><span class="line">        request.source(JSON.toJSONString(user), XContentType.JSON);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å®¢æˆ·ç«¯å‘é€è¯·æ±‚å¹¶è·å–å“åº”ç»“æœ</span></span><br><span class="line">        IndexResponse response = restHighLevelClient.index(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">        System.out.println(response.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ˜¯å¦å­˜åœ¨è¯¥å­—æ®µ</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testIsExist</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        GetRequest request = <span class="keyword">new</span> GetRequest(<span class="string">&quot;cooper_index&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        request.fetchSourceContext(<span class="keyword">new</span> FetchSourceContext(<span class="keyword">false</span>));<span class="comment">//ä¸è·å–è¿”å›çš„_sourceçš„ä¸Šä¸‹æ–‡  æé«˜æŸ¥è¯¢çš„æ•ˆç‡</span></span><br><span class="line">        request.storedFields(<span class="string">&quot;_none&quot;</span>);</span><br><span class="line">        <span class="keyword">boolean</span> exists = restHighLevelClient.exists(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(exists);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ–‡æ¡£ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        GetRequest request = <span class="keyword">new</span> GetRequest(<span class="string">&quot;cooper_index&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        GetResponse response = restHighLevelClient.get(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(response.getSourceAsString());<span class="comment">//æ‰“å°æ–‡æ¡£å†…å®¹</span></span><br><span class="line">        System.out.println(response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ›´æ–°æ–‡æ¡£ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        UpdateRequest request = <span class="keyword">new</span> UpdateRequest(<span class="string">&quot;cooper_index&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        request.timeout(<span class="string">&quot;1s&quot;</span>);</span><br><span class="line"></span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">&quot;Aaron&quot;</span>,<span class="number">10</span>);</span><br><span class="line">        request.doc(JSON.toJSONString(user),XContentType.JSON);</span><br><span class="line"></span><br><span class="line">        UpdateResponse response = restHighLevelClient.update(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(response.status());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤æ–‡æ¡£ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        DeleteRequest request = <span class="keyword">new</span> DeleteRequest(<span class="string">&quot;cooper_index&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        request.timeout(<span class="string">&quot;1s&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        DeleteResponse response = restHighLevelClient.delete(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(response.status());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡æ’å…¥å’ŒæŸ¥è¯¢"><a href="#æ‰¹é‡æ’å…¥å’ŒæŸ¥è¯¢" class="headerlink" title="æ‰¹é‡æ’å…¥å’ŒæŸ¥è¯¢"></a>æ‰¹é‡æ’å…¥å’ŒæŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰¹é‡æ’å…¥æ•°æ®</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testBulkRequest</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BulkRequest request = <span class="keyword">new</span> BulkRequest();</span><br><span class="line">        request.timeout(<span class="string">&quot;10s&quot;</span>);</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="string">&quot;Aaron1&quot;</span>,<span class="number">1</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="string">&quot;Aaron2&quot;</span>,<span class="number">2</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="string">&quot;Aaron3&quot;</span>,<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;users.size();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            request.add(<span class="keyword">new</span> IndexRequest(<span class="string">&quot;cooper_index&quot;</span>).id(<span class="string">&quot;&quot;</span>+(i+<span class="number">1</span>)).</span><br><span class="line">                    source(JSON.toJSONString(users.get(i)),XContentType.JSON)); <span class="comment">//æ­¤å¤„å¦‚æœä¸æ·»åŠ idçš„è¯ï¼Œç³»ç»Ÿä¼šç»™ä½ éšæœºåˆ†é…ä¸€ä¸ªid</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        BulkResponse bulkResponse = restHighLevelClient.bulk(request, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(bulkResponse.hasFailures());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‰¹é‡æŸ¥è¯¢</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSearch</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        SearchRequest request = <span class="keyword">new</span> SearchRequest();</span><br><span class="line">        <span class="comment">//æ„å»ºæŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">        SearchSourceBuilder sourceBuilder = <span class="keyword">new</span> SearchSourceBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥è¯¢æ¡ä»¶å¯ä»¥ä½¿ç”¨QueryBuilderå·¥å…·æ¥å®ç°</span></span><br><span class="line">        <span class="comment">//termQueryä¸ºç²¾ç¡®æŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ­¤å¤„å¿…é¡»å†™æˆname.keyword ä¸èƒ½åªå†™name å› ä¸º</span></span><br><span class="line">        <span class="comment">//elasticsearch é‡Œé»˜è®¤çš„IKåˆ†è¯å™¨æ˜¯ä¼šå°†æ¯ä¸€ä¸ªä¸­æ–‡éƒ½è¿›è¡Œäº†åˆ†è¯çš„åˆ‡å‰²ï¼Œæ‰€ä»¥ä½ ç›´æ¥æƒ³æŸ¥ä¸€æ•´ä¸ªè¯ï¼Œæˆ–è€…ä¸€æ•´å¥è¯æ˜¯æ— è¿”å›ç»“æœçš„</span></span><br><span class="line">        TermQueryBuilder termQueryBuilder = QueryBuilders.termQuery(<span class="string">&quot;name.keyword&quot;</span>, <span class="string">&quot;Aaron1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        sourceBuilder.query(termQueryBuilder);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        sourceBuilder.timeout(<span class="keyword">new</span> TimeValue(<span class="number">60</span>, TimeUnit.SECONDS));</span><br><span class="line"></span><br><span class="line">        request.source(sourceBuilder);</span><br><span class="line"></span><br><span class="line">        SearchResponse search = restHighLevelClient.search(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">        System.out.println(JSON.toJSONString(search.getHits()));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;========&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (SearchHit hit : search.getHits().getHits()) &#123;</span><br><span class="line">            System.out.println(hit.getSourceAsMap());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="äº¬ä¸œæœç´¢å®æˆ˜"><a href="#äº¬ä¸œæœç´¢å®æˆ˜" class="headerlink" title="äº¬ä¸œæœç´¢å®æˆ˜"></a>äº¬ä¸œæœç´¢å®æˆ˜</h3><h4 id="è®¿é—®é™æ€é¡µé¢"><a href="#è®¿é—®é™æ€é¡µé¢" class="headerlink" title="è®¿é—®é™æ€é¡µé¢"></a>è®¿é—®é™æ€é¡µé¢</h4><p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203417.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>æ³¨æ„:ä¸Šæ–‡ä¿®æ”¹ElasticSearchç‰ˆæœ¬åŒ…çš„æ·»åŠ configåŒ…å’Œå…¶æ–‡ä»¶ï¼Œå¯¼å…¥é™æ€èµ„æº</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server.port=<span class="number">9090</span></span><br><span class="line"># å…³é—­thymeleafçš„ç¼“å­˜</span><br><span class="line">spring.thymeleaf.cache=<span class="keyword">false</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Jd</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&#123;&quot;/&quot;, &quot;/jd&quot;&#125;)</span></span><br><span class="line"><span class="comment">//    @ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">jd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯ä»¥è®¿é—®é¦–é¡µ</span></span><br></pre></td></tr></table></figure>

<h4 id="æ•°æ®çˆ¬å–"><a href="#æ•°æ®çˆ¬å–" class="headerlink" title="æ•°æ®çˆ¬å–"></a>æ•°æ®çˆ¬å–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//éœ€è¦å¯¼å…¥jsoupåŒ…</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jsoup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsoup<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.10.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–å†™å·¥å…·ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HtmlParseUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> HtmlParseUtil().parseID(<span class="string">&quot;java&quot;</span>).forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Content&gt; <span class="title">parseID</span><span class="params">(String keyword)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String url = <span class="string">&quot;https://search.jd.com/Search?keyword=&quot;</span>+keyword;</span><br><span class="line">        <span class="comment">//è§£æç½‘é¡µ</span></span><br><span class="line">        Document document = Jsoup.parse(<span class="keyword">new</span> URL(url),<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">        Element element = document.getElementById(<span class="string">&quot;J_goodsList&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Elements elements = element.getElementsByTag(<span class="string">&quot;li&quot;</span>);</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Content&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Element el : elements) &#123;</span><br><span class="line">            String img = el.getElementsByTag(<span class="string">&quot;img&quot;</span>).eq(<span class="number">0</span>).attr(<span class="string">&quot;src&quot;</span>);</span><br><span class="line">            String price = el.getElementsByClass(<span class="string">&quot;p-price&quot;</span>).eq(<span class="number">0</span>).text();</span><br><span class="line">            String title = el.getElementsByClass(<span class="string">&quot;p-name&quot;</span>).eq(<span class="number">0</span>).text();</span><br><span class="line"></span><br><span class="line"><span class="comment">//            System.out.println(&quot;================&quot;);</span></span><br><span class="line"><span class="comment">//            System.out.println(img);</span></span><br><span class="line"><span class="comment">//            System.out.println(price);</span></span><br><span class="line"><span class="comment">//            System.out.println(title);</span></span><br><span class="line">            Content content = <span class="keyword">new</span> Content();</span><br><span class="line">            content.setImg(img);</span><br><span class="line">            content.setPrice(price);</span><br><span class="line">            content.setTitle(title);</span><br><span class="line"></span><br><span class="line">            list.add(content);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ•°æ®å­˜è¿›es"><a href="#æ•°æ®å­˜è¿›es" class="headerlink" title="æ•°æ®å­˜è¿›es"></a>æ•°æ®å­˜è¿›es</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zgc.esjd3.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.zgc.esjd3.pojo.Content;</span><br><span class="line"><span class="keyword">import</span> com.zgc.esjd3.util.HtmlParseUtil;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.bulk.BulkRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.bulk.BulkResponse;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.action.index.IndexRequest;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RequestOptions;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RestHighLevelClient;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.common.xcontent.XContentType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient restHighLevelClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Jsoupæ•°æ®æ”¾es</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">parseContent</span><span class="params">(String keyword)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        BulkRequest bulkRequest = <span class="keyword">new</span> BulkRequest();</span><br><span class="line">        bulkRequest.timeout(<span class="string">&quot;3m&quot;</span>);</span><br><span class="line">        ArrayList&lt;Content&gt; contents = <span class="keyword">new</span> HtmlParseUtil().parseJd(keyword);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; contents.size(); i++) &#123;</span><br><span class="line">            bulkRequest.add(<span class="keyword">new</span> IndexRequest(<span class="string">&quot;jd_index&quot;</span>).id(<span class="string">&quot;&quot;</span> + (i + <span class="number">1</span>)).source(JSON.toJSONString(contents.get(i)), XContentType.JSON));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        BulkResponse bulk = restHighLevelClient.bulk(bulkRequest, RequestOptions.DEFAULT);</span><br><span class="line">        <span class="keyword">return</span> !bulk.hasFailures();  <span class="comment">// hasFailuresè¿”å›falseä¸ºæˆåŠŸ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/jdTest/&#123;keyword&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">jdTest</span><span class="params">(<span class="meta">@PathVariable</span> String keyword)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(keyword);</span><br><span class="line">    <span class="keyword">boolean</span> b = contentService.parseContent(keyword);</span><br><span class="line">    System.out.println(b);</span><br><span class="line">    <span class="keyword">return</span> keyword;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è®¿é—®http://localhost:9090/jdTest/javaï¼ŒæˆåŠŸæŠŠæ•°æ®å½•å…¥es</span></span><br></pre></td></tr></table></figure>

<h4 id="å®ç°æœç´¢åŠŸèƒ½"><a href="#å®ç°æœç´¢åŠŸèƒ½" class="headerlink" title="å®ç°æœç´¢åŠŸèƒ½"></a>å®ç°æœç´¢åŠŸèƒ½</h4><p>//åˆ†é¡µ+æœç´¢+é«˜äº®ä¸šåŠ¡ç¼–å†™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; searchPage(String keyword, <span class="keyword">int</span> pageNo, <span class="keyword">int</span> pageSize) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">if</span> (pageNo &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            pageNo = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢è¯·æ±‚</span></span><br><span class="line">        SearchRequest searchRequest = <span class="keyword">new</span> SearchRequest(<span class="string">&quot;jd_index&quot;</span>);</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢æ„é€ </span></span><br><span class="line">        SearchSourceBuilder searchSourceBuilder = <span class="keyword">new</span> SearchSourceBuilder();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ†é¡µ</span></span><br><span class="line">        searchSourceBuilder.from(pageNo);</span><br><span class="line">        searchSourceBuilder.size(pageSize);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç²¾å‡†åŒ¹é…</span></span><br><span class="line">        TermQueryBuilder queryBuilder = QueryBuilders.termQuery(<span class="string">&quot;title&quot;</span>, keyword);</span><br><span class="line">        searchSourceBuilder.query(queryBuilder);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é«˜äº®</span></span><br><span class="line">        HighlightBuilder highlightBuilder = <span class="keyword">new</span> HighlightBuilder();</span><br><span class="line">        highlightBuilder.field(<span class="string">&quot;title&quot;</span>);<span class="comment">//è®¾ç½®é«˜äº®çš„å­—æ®µ</span></span><br><span class="line">        highlightBuilder.requireFieldMatch(<span class="keyword">false</span>); <span class="comment">//å¤šå¤„é«˜äº®</span></span><br><span class="line">        highlightBuilder.preTags(<span class="string">&quot;&lt;span style= &#x27;color:red&#x27;&gt;&quot;</span>);</span><br><span class="line">        highlightBuilder.postTags(<span class="string">&quot;&lt;/span&gt;&quot;</span>);</span><br><span class="line">        searchSourceBuilder.highlighter(highlightBuilder);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰§è¡Œæœç´¢</span></span><br><span class="line">        searchRequest.source(searchSourceBuilder);</span><br><span class="line">        SearchResponse search = restHighLevelClient.search(searchRequest, RequestOptions.DEFAULT);</span><br><span class="line">        System.out.println(search);</span><br><span class="line">        ArrayList&lt;Map&lt;String, Object&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (SearchHit hit : search.getHits()) &#123;</span><br><span class="line">            <span class="comment">//è§£æé«˜äº®çš„å­—æ®µï¼Œå°†åŸæ¥çš„å­—æ®µæ¢ä¸ºæˆ‘ä»¬é«˜äº®çš„å­—æ®µå³å¯</span></span><br><span class="line">            Map&lt;String, HighlightField&gt; highlightFields = hit.getHighlightFields();</span><br><span class="line">            HighlightField title1 = highlightFields.get(<span class="string">&quot;title&quot;</span>);</span><br><span class="line">            Map&lt;String, Object&gt; sourceAsMap = hit.getSourceAsMap();<span class="comment">//åŸæ¥çš„ç»“æœ</span></span><br><span class="line">            <span class="comment">//è§£æé«˜äº®çš„å­—æ®µï¼Œå°†åŸæ¥çš„å­—æ®µæ¢ä¸ºæˆ‘ä»¬é«˜äº®çš„å­—æ®µå³å¯</span></span><br><span class="line">            <span class="keyword">if</span> (title1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                Text[] fragments = title1.fragments();</span><br><span class="line">                String n_title = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">for</span> (Text text : fragments) &#123;</span><br><span class="line">                    n_title += text;</span><br><span class="line">                &#125;</span><br><span class="line">                sourceAsMap.put(<span class="string">&quot;title&quot;</span>, n_title);<span class="comment">//é«˜äº®å­—æ®µæ›¿æ¢æ‰åŸæ¥çš„å†…å®¹ ä¹Ÿå°±æ˜¯å°†åŸæ¥çš„titleæ›¿æ¢ä¸ºé«˜äº®çš„title</span></span><br><span class="line">            &#125;</span><br><span class="line">            list.add(sourceAsMap);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/search/&#123;keyword&#125;/&#123;pageNo&#125;/&#123;pageSize&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; search(<span class="meta">@PathVariable</span> String keyword, <span class="meta">@PathVariable</span> Integer pageNo, <span class="meta">@PathVariable</span> Integer pageSize) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">return</span> contentService.searchPage(keyword,pageNo,pageSize);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¸‹è½½-vue"><a href="#ä¸‹è½½-vue" class="headerlink" title="ä¸‹è½½ vue:"></a><strong>ä¸‹è½½ vue:</strong></h4><p>cnpm install vue<br>cnpm install axios<br>æŠŠä¸¤ä¸ªæ–‡ä»¶æ”¾å…¥static<br><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203435.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203428.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/20200810191845839.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FkbWluNzQxYWRtaW4=,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200819203441.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">ElasticSearchå¸¸è§é—®é¢˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:32:28" itemprop="dateModified" datetime="2021-02-13T08:32:28+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ElasticSearch/" itemprop="url" rel="index"><span itemprop="name">ElasticSearch</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ElasticSearch/es%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>76</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>é›†ç¾¤æ— æ³•è¿æ¥</p>
<p>ymlé…ç½®æ–‡ä»¶é”™è¯¯</p>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20201103175415.png" alt="image-20201103175319796"></p>
</li>
</ol>
<ol start="2">
<li><p>åœ¨springbootä¸­ç±»ä¸­æ— æ³•ä½¿ç”¨ikåˆ†è¯æ³¨è§£</p>
<p>å¯èƒ½æ²¡æœ‰esä¸­æ²¡æœ‰é…ç½®ikåˆ†è¯å™¨æ’ä»¶</p>
</li>
<li><p>springé›†æˆ çš„esä¸esç‰ˆæœ¬ä¸åŒ¹é…</p>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20201103175854.png" alt="image-20201103175540402"></p>
</li>
</ol>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">MongoDBåŸºæœ¬è¯­æ³•</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-26 11:26:13" itemprop="dateModified" datetime="2021-09-26T11:26:13+08:00">2021-09-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MongoDB/" itemprop="url" rel="index"><span itemprop="name">MongoDB</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>2 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="æŸ¥è¯¢æ•°æ®åº“"><a href="#æŸ¥è¯¢æ•°æ®åº“" class="headerlink" title="æŸ¥è¯¢æ•°æ®åº“"></a>æŸ¥è¯¢æ•°æ®åº“</h5><p>show dbs</p>
<h5 id="è¿›å…¥æ•°æ®åº“"><a href="#è¿›å…¥æ•°æ®åº“" class="headerlink" title="è¿›å…¥æ•°æ®åº“"></a>è¿›å…¥æ•°æ®åº“</h5><p>use {xxx};</p>
<h5 id="å‘æ•°æ®åº“çš„æŒ‡å®šcollectionä¸­æ’å…¥ä¸€ä¸ªæ–‡æ¡£ï¼ˆæ­¤å¤„ä»¥studenté›†åˆä¸ºä¾‹ï¼‰"><a href="#å‘æ•°æ®åº“çš„æŒ‡å®šcollectionä¸­æ’å…¥ä¸€ä¸ªæ–‡æ¡£ï¼ˆæ­¤å¤„ä»¥studenté›†åˆä¸ºä¾‹ï¼‰" class="headerlink" title="å‘æ•°æ®åº“çš„æŒ‡å®šcollectionä¸­æ’å…¥ä¸€ä¸ªæ–‡æ¡£ï¼ˆæ­¤å¤„ä»¥studenté›†åˆä¸ºä¾‹ï¼‰"></a>å‘æ•°æ®åº“çš„æŒ‡å®šcollectionä¸­æ’å…¥ä¸€ä¸ªæ–‡æ¡£ï¼ˆæ­¤å¤„ä»¥studenté›†åˆä¸ºä¾‹ï¼‰</h5><p>db.student.insert({</p>
<p>â€‹    username:â€Aaronâ€</p>
<p>});</p>
<h5 id="æŸ¥è¯¢é›†åˆä¸­çš„æ–‡æ¡£"><a href="#æŸ¥è¯¢é›†åˆä¸­çš„æ–‡æ¡£" class="headerlink" title="æŸ¥è¯¢é›†åˆä¸­çš„æ–‡æ¡£"></a>æŸ¥è¯¢é›†åˆä¸­çš„æ–‡æ¡£</h5><ul>
<li><p>æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£</p>
<p>db.student.find();</p>
<p>è¿”å›çš„æ˜¯æ•°ç»„ï¼Œå¦‚æœéœ€è¦æŸ¥è¯¢å…·ä½“çš„å±æ€§éœ€è¦æ·»åŠ ç´¢å¼•</p>
<p>æ¯”å¦‚ï¼šdb.student.find()[0].id;</p>
</li>
<li><p>æŸ¥è¯¢æŒ‡å®šæ–‡æ¡£</p>
<p>db.student.find({username:â€Aaronâ€});</p>
</li>
</ul>
<h5 id="ç»Ÿè®¡æ–‡æ¡£æ•°é‡"><a href="#ç»Ÿè®¡æ–‡æ¡£æ•°é‡" class="headerlink" title="ç»Ÿè®¡æ–‡æ¡£æ•°é‡"></a>ç»Ÿè®¡æ–‡æ¡£æ•°é‡</h5><p>db.student.find().count();</p>
<h5 id="æ·»åŠ å±æ€§"><a href="#æ·»åŠ å±æ€§" class="headerlink" title="æ·»åŠ å±æ€§"></a>æ·»åŠ å±æ€§</h5><p>db.student.update({username:â€Aaronâ€},{$set:{address:â€beijingâ€}});</p>
<h5 id="ä¿®æ”¹æ–‡æ¡£å±æ€§"><a href="#ä¿®æ”¹æ–‡æ¡£å±æ€§" class="headerlink" title="ä¿®æ”¹æ–‡æ¡£å±æ€§"></a>ä¿®æ”¹æ–‡æ¡£å±æ€§</h5><ul>
<li><p>å¢åŠ (salå±æ€§â‰¤1000çš„å¢åŠ 400)</p>
<p>db.student.updateMany({sal:{$let:1000}},{$inc:{sal:400}});</p>
</li>
</ul>
<h5 id="åˆ é™¤å±æ€§"><a href="#åˆ é™¤å±æ€§" class="headerlink" title="åˆ é™¤å±æ€§"></a>åˆ é™¤å±æ€§</h5><p>db.student.update.({username:â€Aaronâ€},{$unset:{address:1}});</p>
<h5 id="æ›¿æ¢æ–‡æ¡£"><a href="#æ›¿æ¢æ–‡æ¡£" class="headerlink" title="æ›¿æ¢æ–‡æ¡£"></a>æ›¿æ¢æ–‡æ¡£</h5><p>db.student.replaceOne({username:â€Aaronâ€},{username:â€Marryâ€});</p>
<p> (ä¸€å®šéœ€è¦æ³¨æ„æ­¤å¤„æ›¿æ¢ä¹‹åæ˜¯åé¢çš„æ–‡æ¡£å®Œå…¨æ›¿æ¢æ‰å‰é¢çš„ï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢åˆ°usernameä¸ºAaronçš„æ–‡æ¡£è¢«æ›¿æ¢ä¸ºä¸€ä¸ªåªæœ‰usernameä¸ºMarryçš„æ–‡æ¡£)</p>
<h5 id="æ’å…¥å†…åµŒæ–‡æ¡£"><a href="#æ’å…¥å†…åµŒæ–‡æ¡£" class="headerlink" title="æ’å…¥å†…åµŒæ–‡æ¡£"></a>æ’å…¥å†…åµŒæ–‡æ¡£</h5><p>MongoDBçš„æ–‡æ¡£å±æ€§å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯å†…åµŒæ–‡æ¡£</p>
<p>db.student.update({username:â€Cooperâ€},{$set:{hobby:{cities:[â€œbeijingâ€,â€NewYorkâ€,â€chenduâ€]}}});</p>
<h5 id="å‘å†…åµŒæ–‡æ¡£ä¸­æ’å…¥å±æ€§-æƒ³æ•°ç»„ä¸­æ’å…¥å±æ€§ä½¿ç”¨pushæˆ–è€…addToSetï¼Œä¸æ˜¯set"><a href="#å‘å†…åµŒæ–‡æ¡£ä¸­æ’å…¥å±æ€§-æƒ³æ•°ç»„ä¸­æ’å…¥å±æ€§ä½¿ç”¨pushæˆ–è€…addToSetï¼Œä¸æ˜¯set" class="headerlink" title="å‘å†…åµŒæ–‡æ¡£ä¸­æ’å…¥å±æ€§(æƒ³æ•°ç»„ä¸­æ’å…¥å±æ€§ä½¿ç”¨pushæˆ–è€…addToSetï¼Œä¸æ˜¯set)"></a>å‘å†…åµŒæ–‡æ¡£ä¸­æ’å…¥å±æ€§(æƒ³æ•°ç»„ä¸­æ’å…¥å±æ€§ä½¿ç”¨pushæˆ–è€…addToSetï¼Œä¸æ˜¯set)</h5><p>db.student.update({username:â€Cooperâ€},{$push:{â€œhobby.citiesâ€:â€shenzhenâ€}});</p>
<p>db.student.update({username:â€Cooperâ€},{$addToSet:{â€œhobby.citiesâ€:â€shenzhenâ€}});</p>
<p>pushä¸addToSetçš„åŒºåˆ«ï¼š</p>
<p>addToSetä¸å¯ä»¥å¯ä»¥é‡å¤æ·»åŠ å…ƒç´ ï¼Œpushå¯ä»¥</p>
<h5 id="æŸ¥è¯¢å†…åµŒæ–‡æ¡£å±æ€§-å†…åµŒå±æ€§éœ€è¦æ·»åŠ å¼•å·"><a href="#æŸ¥è¯¢å†…åµŒæ–‡æ¡£å±æ€§-å†…åµŒå±æ€§éœ€è¦æ·»åŠ å¼•å·" class="headerlink" title="æŸ¥è¯¢å†…åµŒæ–‡æ¡£å±æ€§(å†…åµŒå±æ€§éœ€è¦æ·»åŠ å¼•å·)"></a>æŸ¥è¯¢å†…åµŒæ–‡æ¡£å±æ€§(å†…åµŒå±æ€§éœ€è¦æ·»åŠ å¼•å·)</h5><p>db.student.find({â€œhobby.citiesâ€:â€chenduâ€});</p>
<h5 id="åˆ é™¤æ–‡æ¡£"><a href="#åˆ é™¤æ–‡æ¡£" class="headerlink" title="åˆ é™¤æ–‡æ¡£"></a>åˆ é™¤æ–‡æ¡£</h5><p>db.student.deleteOne({username:â€Cooperâ€});</p>
<p>db.student.remove({â€œhobby.citiesâ€:â€beijingâ€});</p>
<h5 id="åˆ é™¤é›†åˆ"><a href="#åˆ é™¤é›†åˆ" class="headerlink" title="åˆ é™¤é›†åˆ"></a>åˆ é™¤é›†åˆ</h5><p>db.student.remove()</p>
<p>Db.student.drop()</p>
<h5 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h5><ol>
<li><p>â€œ&gt;â€</p>
<p>db.student.find({num:{$gt:500}});</p>
<ol start="2">
<li>â€œ&lt;â€</li>
</ol>
<p>db.student.find({num:{$lt:500}});</p>
<ol start="3">
<li>â€œ=â€</li>
</ol>
<p>db.student.find({num:{$eq:500}});</p>
<ol start="4">
<li>â€œ&lt;xxx&lt;â€</li>
</ol>
<p>db.student.find({num:{$gt:500,$lt:800}});</p>
<ol start="5">
<li>â€œ&lt; xxx or  &gt;xxxâ€</li>
</ol>
<p>db.student.find({$or:[{num:{$gt:800,$lt:500}]});</p>
<ol start="6">
<li>â€œ&gt;=â€</li>
</ol>
<p>db.student.find({num:{$gte:500}});</p>
<ol start="7">
<li>è®¾ç½®æ˜¾ç¤ºæ•°æ®çš„ä¸ªæ•°(ä»¥10æ¡ä¸ºä¾‹)</li>
</ol>
<p>db.student.find().limit(10);</p>
<ol start="8">
<li>æŸ¥è¯¢20-30æ¡æ•°æ®</li>
</ol>
<p>db.student.find().skip(20).limit(10);</p>
</li>
<li><p>å¤šå±æ€§æŸ¥è¯¢</p>
<p>db.Object.find({â€œpathâ€:/2021/,sz:{$lt:4194304}}).count()</p>
</li>
</ol>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><ul>
<li><p>å‡åºï¼ˆæŒ‰ç…§salå±æ€§æ’åºï¼‰</p>
<p>db.student.find().sort({sal:1})  </p>
</li>
<li><p>é™åº</p>
<p>db.student.find().sort({sal:-1})  </p>
</li>
<li><p>å¤šå±æ€§æ’åº(å…ˆæŒ‰ç…§salå±æ€§è¿›è¡Œæ’åºï¼Œå¦‚æœsalç›¸ç­‰ï¼Œåˆ™æŒ‰ç…§idè¿›è¡Œæ’åº)</p>
<p>db.student.find().sort({sal:-1ï¼Œid:1})  </p>
</li>
</ul>
<h5 id="æŠ•å½±-å¸Œæœ›æ˜¾ç¤ºåˆ™å±æ€§æ ‡ä¸º1ï¼Œidæ˜¯é»˜è®¤æ˜¾ç¤ºçš„ï¼Œå¦‚æœä¸æƒ³æ˜¾ç¤ºåˆ™-idæ ‡å¿—ä¸º0"><a href="#æŠ•å½±-å¸Œæœ›æ˜¾ç¤ºåˆ™å±æ€§æ ‡ä¸º1ï¼Œidæ˜¯é»˜è®¤æ˜¾ç¤ºçš„ï¼Œå¦‚æœä¸æƒ³æ˜¾ç¤ºåˆ™-idæ ‡å¿—ä¸º0" class="headerlink" title="æŠ•å½±(å¸Œæœ›æ˜¾ç¤ºåˆ™å±æ€§æ ‡ä¸º1ï¼Œidæ˜¯é»˜è®¤æ˜¾ç¤ºçš„ï¼Œå¦‚æœä¸æƒ³æ˜¾ç¤ºåˆ™_idæ ‡å¿—ä¸º0)"></a>æŠ•å½±(å¸Œæœ›æ˜¾ç¤ºåˆ™å±æ€§æ ‡ä¸º1ï¼Œidæ˜¯é»˜è®¤æ˜¾ç¤ºçš„ï¼Œå¦‚æœä¸æƒ³æ˜¾ç¤ºåˆ™_idæ ‡å¿—ä¸º0)</h5><p>db.student.find({},{sal:1,_id:0})</p>
<h5 id="æ•ˆç‡å¯¹æ¯”"><a href="#æ•ˆç‡å¯¹æ¯”" class="headerlink" title="æ•ˆç‡å¯¹æ¯”"></a>æ•ˆç‡å¯¹æ¯”</h5><p>å‘studentä¸­æ’å…¥2000æ¡æ•°æ®</p>
<ol>
<li><p>for(var i = 1;i&lt;=2000;i++)</p>
<p>{</p>
<p>â€‹    db.student.insert({num:i});</p>
<p>}</p>
<p>æ­¤æ–¹æ³•æ‰§è¡Œæ•ˆç‡è¾ƒæ…¢</p>
</li>
<li><p>var arr = [];</p>
<p>for(var i = 1;i&lt;=2000;i++)</p>
<p>{</p>
<p>â€‹    arr.push({num:i})</p>
<p>}</p>
<p>db.student.insert(arr);</p>
<p>å…ˆæŠŠæ•°å­—æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œæœ€åç»Ÿä¸€æ·»åŠ åˆ°é›†åˆä¸­ï¼Œæ•ˆç‡è¾ƒé«˜</p>
</li>
</ol>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/%E6%96%87%E6%A1%A3%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/%E6%96%87%E6%A1%A3%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/" class="post-title-link" itemprop="url">æ–‡æ¡£å¯¹åº”å…³ç³»</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:38:14" itemprop="dateModified" datetime="2021-02-13T08:38:14+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MongoDB/" itemprop="url" rel="index"><span itemprop="name">MongoDB</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/%E6%96%87%E6%A1%A3%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/%E6%96%87%E6%A1%A3%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>416</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h5><p>é€šè¿‡å†…åµŒæ–‡æ¡£è¡¨ç°å‡ºä¸€å¯¹ä¸€çš„å…³ç³»</p>
<p>db.wifeAndhusband.insert([{</p>
<p>â€‹        name:â€é»„è“‰â€,</p>
<p>â€‹        husband:{</p>
<p>â€‹        name:â€éƒ­é–â€ï¼Œ</p>
<p>}</p>
<p>}ï¼Œ</p>
<p>{</p>
<p>â€‹        name:â€é»‘å¯¡å¦‡â€,</p>
<p>â€‹        husband:{</p>
<p>â€‹        name:â€æµ©å…‹â€ï¼Œ</p>
<p>}</p>
<p>}</p>
<p>])</p>
<h5 id="ä¸€å¯¹å¤š"><a href="#ä¸€å¯¹å¤š" class="headerlink" title="ä¸€å¯¹å¤š"></a>ä¸€å¯¹å¤š</h5><ul>
<li><p>é€šè¿‡å†…åµŒæ–‡æ¡£æ¥ä½“ç°</p>
</li>
<li><p>é€šè¿‡idæ¥å®ç°</p>
<p>db.users.insert({username:â€zbjâ€});</p>
<p>db.users.insert({username:â€swkâ€});</p>
<p>db.order.insert({list:[â€˜é¦™è•‰â€™,â€™è¥¿ç“œâ€™,â€™è‹¹æœâ€™],user_id:â€™5f4cb9d21afecac72006be92â€™});</p>
<p>var user_id=db.users.findOne({username:â€™swkâ€™})._id;</p>
<p>db.order.find({user_id:â€™5f4cb9ca1afecac72006be91â€™});</p>
</li>
</ul>
<h5 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h5><p>é€šè¿‡idæ•°ç»„æ¥å®ç°ï¼Œå…·ä½“åšæ³•å°±æ˜¯å°†ä¸€å¯¹å¤šä¸­çš„idæ”¹ä¸ºidæ•°ç»„</p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">MongoDBå®‰è£…</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-23 18:47:27" itemprop="dateModified" datetime="2021-09-23T18:47:27+08:00">2021-09-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MongoDB/" itemprop="url" rel="index"><span itemprop="name">MongoDB</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%AE%89%E8%A3%85/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/MongoDB/MongoDB%E5%AE%89%E8%A3%85/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>167</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>ä¸‹è½½å®‰è£…åŒ…</p>
</li>
<li><p>æ‰“å¼€binç›®å½•å¹¶åœ¨æ­¤æ‰“å¼€terminal</p>
</li>
<li><p>æŒ‡å®šåˆ›å»ºæ•°æ®åº“çš„ä½ç½®</p>
<p><code>sudo ./mongod --dbpath=/Users/cooper/Documents/Code/Plugins/mongodb/data/db/</code></p>
<p>ä¹Ÿå¯æŒ‡å®šlogçš„ä½ç½®</p>
</li>
<li><p>æ‰“å¼€çš„ç«¯å£å·ä¸º27017</p>
<img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200831151941.png" alt="image-20200831151932966" style="zoom:200%;" />

<p>å‡ºç°è¯¥å­—æ ·ä»£è¡¨æœåŠ¡å·²ç»æ‰“å¼€</p>
</li>
<li><p>æ‰“å¼€å®¢æˆ·ç«¯</p>
<p>è¿›å…¥åˆ°binç›®å½•ä¸‹è¾“å…¥./mongo</p>
</li>
</ol>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Cooper</p>
  <div class="site-description" itemprop="description">è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">341</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">75</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CooperXJ" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;CooperXJ" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1789023580@qq.com" title="E-Mail â†’ mailto:1789023580@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cooper</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">648k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">9:49</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'rOzi1T6uncSYNdx0tp1owOzV-gzGzoHsz',
      appKey     : 'Fk3s6CQBK042e1QltClHnTBP',
      placeholder: "ç•™ä¸‹é‚®ç®±ï¼Œæœ‰å›å¤æ—¶ä½ å°†æ”¶åˆ°æé†’ï¼Œé‚®ç®±ä¸ä¼šè¢«å…¬å¼€",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
