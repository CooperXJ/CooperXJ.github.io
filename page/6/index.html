<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cooperxj.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
<meta property="og:type" content="website">
<meta property="og:title" content="Cooper Notes">
<meta property="og:url" content="http://cooperxj.github.io/page/6/index.html">
<meta property="og:site_name" content="Cooper Notes">
<meta property="og:description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Cooper">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://cooperxj.github.io/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Cooper Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Cooper Notes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">obey rules</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">RabbitMQå®‰è£…</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:41:08" itemprop="dateModified" datetime="2021-02-13T08:41:08+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RabbitMQ/" itemprop="url" rel="index"><span itemprop="name">RabbitMQ</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E5%AE%89%E8%A3%85/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E5%AE%89%E8%A3%85/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>1.1k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="Linuxç¯å¢ƒä¸‹å®‰è£…RabbitMQ"><a href="#Linuxç¯å¢ƒä¸‹å®‰è£…RabbitMQ" class="headerlink" title="Linuxç¯å¢ƒä¸‹å®‰è£…RabbitMQ"></a>Linuxç¯å¢ƒä¸‹å®‰è£…RabbitMQ</h3><h5 id="ä¸‹è½½å¯¹åº”çš„åŒ…ï¼ˆ3ä¸ªåŒ…ï¼‰"><a href="#ä¸‹è½½å¯¹åº”çš„åŒ…ï¼ˆ3ä¸ªåŒ…ï¼‰" class="headerlink" title="ä¸‹è½½å¯¹åº”çš„åŒ…ï¼ˆ3ä¸ªåŒ…ï¼‰"></a>ä¸‹è½½å¯¹åº”çš„åŒ…ï¼ˆ3ä¸ªåŒ…ï¼‰</h5><ol>
<li><p>erlang</p>
<p>ä¸‹è½½çš„ç‰ˆæœ¬è¦ä¸RabbitMQå¯¹åº”<em><a target="_blank" rel="noopener" href="https://www.rabbitmq.com/which-erlang.html">https://www.rabbitmq.com/which-erlang.html</a></em></p>
<p><a target="_blank" rel="noopener" href="https://dl.bintray.com/rabbitmq-erlang/rpm/erlang/22/el/7/x86_64/">erlangç‰ˆæœ¬</a></p>
<ol start="2">
<li>RabbitMQ</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://www.rabbitmq.com/download.html">https://www.rabbitmq.com/download.html</a></p>
<ol start="3">
<li>ä¾èµ–åŒ…</li>
</ol>
<p>rabbitmqå®‰è£…ä¾èµ–äºsocatï¼Œæ‰€ä»¥éœ€è¦ä¸‹è½½socatã€‚</p>
</li>
</ol>
<p>ã€€ã€€socatä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://repo.iotti.biz/CentOS/6/x86_64/[socat-1.7.3.2-1.el6.lux.x86_64.rpm](http://repo.iotti.biz/CentOS/6/x86_64/socat-1.7.3.2-1.el6.lux.x86_64.rpm)">http://repo.iotti.biz/CentOS/6/x86_64/[socat-1.7.3.2-1.el6.lux.x86_64.rpm](http://repo.iotti.biz/CentOS/6/x86_64/socat-1.7.3.2-1.el6.lux.x86_64.rpm)</a></p>
<p>ã€€ã€€æ ¹æ®è‡ªèº«éœ€æ±‚ä¸‹è½½å¯¹åº”ç³»ç»Ÿsocatä¾èµ–ï¼š(<a target="_blank" rel="noopener" href="http://repo.iotti.biz/CentOS/">http://repo.iotti.biz/CentOS/</a>)</p>
<h5 id="å®‰è£…åŒ…ï¼ˆä¸€å®šè¦æ³¨æ„å®‰è£…é¡ºåºï¼‰"><a href="#å®‰è£…åŒ…ï¼ˆä¸€å®šè¦æ³¨æ„å®‰è£…é¡ºåºï¼‰" class="headerlink" title="å®‰è£…åŒ…ï¼ˆä¸€å®šè¦æ³¨æ„å®‰è£…é¡ºåºï¼‰"></a>å®‰è£…åŒ…ï¼ˆä¸€å®šè¦æ³¨æ„å®‰è£…é¡ºåºï¼‰</h5><p><strong>ä¸€å®šæŒ‰ç…§ä»¥ä¸‹é¡ºåºå®‰è£…</strong>ï¼š</p>
<p>ã€€ã€€â‘  rpm -ivh erlang-22.2.4-1.el7.x86_64.rpm </p>
<p>ã€€ã€€â‘¡rpm -ivh socat-1.7.3.2-1.el6.lux.x86_64.rpm</p>
<p>ã€€ã€€â‘¢ rpm -ivh rabbitmq-server-3.8.8-1.el7.noarch.rpm </p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qinghuaL/p/11597695.html">å¦‚æœå®‰è£…ç‰ˆæœ¬å¤±è´¥äº†ï¼Œåˆ™å¯ä»¥å¸è½½é‡æ–°å®‰è£…</a></p>
<h5 id="é…ç½®Rabbit-configæ–‡ä»¶"><a href="#é…ç½®Rabbit-configæ–‡ä»¶" class="headerlink" title="é…ç½®Rabbit.configæ–‡ä»¶"></a>é…ç½®Rabbit.configæ–‡ä»¶</h5><ul>
<li><p>æœ‰å¯èƒ½åœ¨/usr/share/doc/rabbitmq-server-3.8.8/ç›®å½•ä¸‹æœ‰Rabbit.configçš„æ¨¡æ¿</p>
</li>
<li><p>æ‰¾åˆ°åä¿®æ”¹ç¬¬61è¡Œ</p>
</li>
</ul>
<img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200907213456.png" alt="image-20200907213450706" style="zoom:50%;" />

<p>â€‹        %%å»é™¤ï¼Œå¹¶å°†å…¶åçš„â€œ,â€å»é™¤</p>
<ul>
<li><p>å°†å…¶å¤åˆ¶åˆ° /etc/rabbitmq/ç›®å½•ä¸‹</p>
<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è‡ªå·±å¤åˆ¶ä¸€ä»½configï¼ˆ<a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaoming1563/article/details/82385486%EF%BC%89">https://blog.csdn.net/xiaoming1563/article/details/82385486ï¼‰</a></p>
</li>
</ul>
<h5 id="å®‰è£…RabbitMQçš„WEBæ’ä»¶"><a href="#å®‰è£…RabbitMQçš„WEBæ’ä»¶" class="headerlink" title="å®‰è£…RabbitMQçš„WEBæ’ä»¶"></a>å®‰è£…RabbitMQçš„WEBæ’ä»¶</h5><p><code>rabbitmq-plugins enable rabbitmq_management</code></p>
<h5 id="å¦‚æœæ— æ³•é€šè¿‡guestè¿›è¡Œè®¿é—®"><a href="#å¦‚æœæ— æ³•é€šè¿‡guestè¿›è¡Œè®¿é—®" class="headerlink" title="å¦‚æœæ— æ³•é€šè¿‡guestè¿›è¡Œè®¿é—®"></a>å¦‚æœæ— æ³•é€šè¿‡guestè¿›è¡Œè®¿é—®</h5><p>æ–°å¢ç”¨æˆ·è¿›è¡Œè®¿é—®å³å¯</p>
<ul>
<li><p>æŸ¥è¯¢ç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl list_users</span><br></pre></td></tr></table></figure></li>
<li><p>æ–°å¢ç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl add_user <span class="string">&#x27;username&#x27;</span> <span class="string">&#x27;password&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li><p>æˆæƒï¼ˆè™šæ‹Ÿæœºæˆæƒï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl set_permissions -p <span class="string">&quot;/&quot;</span> <span class="string">&quot;username&quot;</span> <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span> <span class="string">&quot;.*&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>è®¾ç½®ç”¨æˆ·è§’è‰²ï¼ˆå¿…é¡»è®¾ç½®ï¼Œå¦åˆ™æ— æ³•ç™»é™†ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rabbitmqctl set_user_tags username administrator</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="è®¿é—®ç«¯å£"><a href="#è®¿é—®ç«¯å£" class="headerlink" title="è®¿é—®ç«¯å£"></a>è®¿é—®ç«¯å£</h5><p><a target="_blank" rel="noopener" href="http://ip:15672/">http://ip:15672</a></p>
<p>â€‹        </p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E9%9B%86%E7%BE%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E9%9B%86%E7%BE%A4/" class="post-title-link" itemprop="url">RabbitMQé›†ç¾¤</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:41:19" itemprop="dateModified" datetime="2021-02-13T08:41:19+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RabbitMQ/" itemprop="url" rel="index"><span itemprop="name">RabbitMQ</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E9%9B%86%E7%BE%A4/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbitMQ%E9%9B%86%E7%BE%A4/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>528</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="é›†ç¾¤æ¶æ„"><a href="#é›†ç¾¤æ¶æ„" class="headerlink" title="é›†ç¾¤æ¶æ„"></a>é›†ç¾¤æ¶æ„</h4><h5 id="æ™®é€šé›†ç¾¤ï¼ˆå‰¯æœ¬é›†ç¾¤ï¼‰"><a href="#æ™®é€šé›†ç¾¤ï¼ˆå‰¯æœ¬é›†ç¾¤ï¼‰" class="headerlink" title="æ™®é€šé›†ç¾¤ï¼ˆå‰¯æœ¬é›†ç¾¤ï¼‰"></a>æ™®é€šé›†ç¾¤ï¼ˆå‰¯æœ¬é›†ç¾¤ï¼‰</h5><p>â€‹    é»˜è®¤æƒ…å†µä¸‹ï¼šRabbitMQä»£ç†æ‰€æœ‰æ“ä½œæ‰€éœ€çš„æ‰€æœ‰æ•°æ®/çŠ¶æ€å°†è·¨æ‰€æœ‰èŠ‚ç‚¹å¤åˆ¶ï¼Œè¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å¤–æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä½äºä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå°½ç®¡å®ƒä»¬æ˜¯å¯ä»¥ä»æ‰€æœ‰èŠ‚ç‚¹çœ‹åˆ°å’Œè®¿é—®ã€‚</p>
<p>â€‹    ä¹Ÿå°±è¯´ä»èŠ‚ç‚¹åªå¤åˆ¶äº†é™¤äº†æ¶ˆæ¯é˜Ÿåˆ—ä»¥å¤–çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆä¾‹å¦‚äº¤æ¢æœºçš„ä¿¡æ¯ï¼‰ï¼Œä½†æ˜¯å°±æ˜¯æ²¡æœ‰å¤åˆ¶æ¶ˆæ¯é˜Ÿåˆ—çš„ä¿¡æ¯ï¼Œ<font color=red><strong>é‚£ä¹ˆå½“ä¸»èŠ‚ç‚¹å®•æœºä¹‹åï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿå°±ä¼šéšä¸»èŠ‚ç‚¹çš„æ¶ˆå¤±è€Œæ¶ˆå¤±äº†ï¼Œæ— æ³•é€šè¿‡ä»èŠ‚ç‚¹è¿›è¡Œè®¿é—®</strong></font>ã€‚</p>
<p>â€‹    æ¶æ„å›¾ï¼š</p>
<p>â€‹        <img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200907142249.png" alt="image-20200907142236833" style="zoom:50%;position=center" /></p>
<p>â€‹    æ ¸å¿ƒç¼ºé™·ï¼š</p>
<p>â€‹        <strong>ä¸»èŠ‚ç‚¹å®•æœºä¹‹åï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿå°±ä¼šéšä¸»èŠ‚ç‚¹çš„æ¶ˆå¤±è€Œæ¶ˆå¤±äº†ï¼Œæ— æ³•é€šè¿‡ä»èŠ‚ç‚¹è¿›è¡Œè®¿é—®</strong></p>
<p>â€‹    </p>
<h5 id="é›†ç¾¤æ­å»º"><a href="#é›†ç¾¤æ­å»º" class="headerlink" title="é›†ç¾¤æ­å»º"></a>é›†ç¾¤æ­å»º</h5><p>â€‹        æŒ‰ç…§Rabbitå®‰è£…æ•™ç¨‹å®‰è£…å¥½ä¹‹å</p>
<ul>
<li><p>ç¼–è¾‘/etc/hosts  æ·»åŠ ä¸»ä»èŠ‚ç‚¹</p>
<ul>
<li><p>åŒæ­¥erlang cookie</p>
<p>scp /var/lib/rabbitmq/.erlang.cookie  root@ip:/var/lib/rabbitmq/</p>
</li>
</ul>
</li>
<li><p>masteråå°å¯åŠ¨</p>
</li>
<li><p>ä»èŠ‚ç‚¹åœæ­¢å¯åŠ¨</p>
<p><code>rabbitmq stop_app</code></p>
</li>
<li><p>ä»èŠ‚ç‚¹åŠ å…¥é›†ç¾¤</p>
<p><code>rabbitmqctl join_cluster rabbit@&#123;ä¸»èŠ‚ç‚¹&#125;</code></p>
</li>
<li><p>å¯åŠ¨ä»èŠ‚ç‚¹</p>
<p><code>rabbitmq start_app</code></p>
</li>
</ul>
<h5 id="é•œåƒé›†ç¾¤"><a href="#é•œåƒé›†ç¾¤" class="headerlink" title="é•œåƒé›†ç¾¤"></a>é•œåƒé›†ç¾¤</h5><p><font color=red><strong>å½“ä¸»èŠ‚ç‚¹å®•æœºä¹‹åï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä¸ä¼šéšä¸»èŠ‚ç‚¹çš„æ¶ˆå¤±è€Œæ¶ˆå¤±äº†ï¼Œå¯ä»¥é€šè¿‡ä»èŠ‚ç‚¹è¿›è¡Œè®¿é—®</strong></font></p>
<img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200908103655.png" alt="image-20200908103649744" style="zoom:50%;" />

<p>åœ¨åŸæ¥æ™®é€šé›†ç¾¤çš„åŸºç¡€ä¸Šè¿›è¡Œé…ç½®</p>
<img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200908105025.png" alt="image-20200908104515651" style="zoom:50%;" />


      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/rabbitmq%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/rabbitmq%E6%A8%A1%E5%9E%8B/" class="post-title-link" itemprop="url">RabbitMQæ¨¡å‹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:41:27" itemprop="dateModified" datetime="2021-02-13T08:41:27+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RabbitMQ/" itemprop="url" rel="index"><span itemprop="name">RabbitMQ</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/rabbitmq%E6%A8%A1%E5%9E%8B/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/rabbitmq%E6%A8%A1%E5%9E%8B/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>9.1k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>8 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="ç›´è¿æ¨¡å‹"><a href="#ç›´è¿æ¨¡å‹" class="headerlink" title="ç›´è¿æ¨¡å‹"></a>ç›´è¿æ¨¡å‹</h4><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200904110719.png" alt="image-20200904110714767" style="zoom:50%;" />

<p>åœ¨ä¸Šå›¾çš„æ¨¡å‹ä¸­ï¼Œæœ‰ä»¥ä¸‹æ¦‚å¿µï¼š</p>
<ul>
<li>P:ç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å‘é€æ¶ˆæ¯çš„ç¨‹åº</li>
<li>C:æ¶ˆè´¹è€…ï¼Œæ¶ˆæ¯çš„æ¥æ”¶è€…</li>
<li>queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯ä»¥ç¼“å­˜æ¶ˆæ¯ï¼Œç”Ÿäº§è€…å¾€å…¶ä¸­æŠ•é€’æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä»å…¶ä¸­å–å‡ºæ¶ˆæ¯</li>
</ul>
<p>ğŸŒ°</p>
<p>Provider</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line"><span class="comment">//è®¾ç½®è¿æ¥ä¸»æœº</span></span><br><span class="line">factory.setHost(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®è¿æ¥ç«¯å£</span></span><br><span class="line">factory.setPort(<span class="number">5672</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®è¿æ¥è™šæ‹Ÿä¸»æœº</span></span><br><span class="line">factory.setVirtualHost(<span class="string">&quot;/ems&quot;</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®è´¦æˆ·å¯†ç </span></span><br><span class="line">factory.setUsername(<span class="string">&quot;ems&quot;</span>);</span><br><span class="line">factory.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–è¿æ¥å¯¹è±¡</span></span><br><span class="line">Connection connection = factory.newConnection();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–è¿æ¥é€šé“</span></span><br><span class="line">Channel channel = connection.createChannel();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»‘å®šå¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‚æ•°s é˜Ÿåˆ—åç§°  ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment"> * å‚æ•°b é˜Ÿåˆ—æ˜¯å¦éœ€è¦æŒä¹…åŒ–  ï¼ˆä¸åŒ…æ‹¬æ¶ˆæ¯æŒä¹…åŒ–ï¼‰</span></span><br><span class="line"><span class="comment"> * å‚æ•°b1 æ˜¯å¦éœ€è¦ç‹¬å é˜Ÿåˆ—(å½“å‰é˜Ÿåˆ—åªè¿è¡Œå½“å‰è¿æ¥å¯ç”¨ï¼Ÿ)</span></span><br><span class="line"><span class="comment"> * å‚æ•°b2 æ˜¯å¦åœ¨æ¶ˆè´¹å®Œæˆåè‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> * å‚æ•° map  é¢å¤–çš„é™„åŠ å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‚æ•°s äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°s1 è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="comment"> * å‚æ•°3 ä¼ é€’æ¶ˆæ¯é¢å¤–è®¾ç½®  (ä¾‹å¦‚æ¶ˆæ¯æŒä¹…åŒ– MessageProperties.PERSISTENT_TEXT_PLAIN)</span></span><br><span class="line"><span class="comment"> * å‚æ•°4  æ¶ˆæ¯çš„å…·ä½“å†…å®¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.basicPublish(<span class="string">&quot;&quot;</span>,<span class="string">&quot;hello&quot;</span>,<span class="keyword">null</span>,<span class="string">&quot;hello rabbotmq&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">channel.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure>

<p>Consumer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> ConnectionFactory factory = <span class="keyword">new</span> ConnectionFactory();</span><br><span class="line"> <span class="comment">//è®¾ç½®è¿æ¥ä¸»æœº</span></span><br><span class="line"> factory.setHost(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"> <span class="comment">//è®¾ç½®è¿æ¥ç«¯å£</span></span><br><span class="line"> factory.setPort(<span class="number">5672</span>);</span><br><span class="line"> <span class="comment">//è®¾ç½®è¿æ¥è™šæ‹Ÿä¸»æœº</span></span><br><span class="line"> factory.setVirtualHost(<span class="string">&quot;/ems&quot;</span>);</span><br><span class="line"> <span class="comment">//è®¾ç½®è´¦æˆ·å¯†ç </span></span><br><span class="line"> factory.setUsername(<span class="string">&quot;ems&quot;</span>);</span><br><span class="line"> factory.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//è·å–è¿æ¥å¯¹è±¡</span></span><br><span class="line"> Connection connection = factory.newConnection();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//è·å–è¿æ¥é€šé“</span></span><br><span class="line"> Channel channel = connection.createChannel();</span><br><span class="line"></span><br><span class="line"> <span class="comment">//ç»‘å®šå¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—  è¦ä¿è¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å„é¡¹å‚æ•°ä¸¥æ ¼å¯¹åº”ä¸Š ï¼Œæ¯”å¦‚è¯´ç”Ÿäº§è€…æŒä¹…åŒ–äº†ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…ä¹Ÿéœ€è¦æŒä¹…åŒ–</span></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * å‚æ•°s é˜Ÿåˆ—åç§°  ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment">  * å‚æ•°b é˜Ÿåˆ—æ˜¯å¦éœ€è¦æŒä¹…åŒ–</span></span><br><span class="line"><span class="comment">  * å‚æ•°b1 æ˜¯å¦éœ€è¦ç‹¬å é˜Ÿåˆ—(å½“å‰é˜Ÿåˆ—åªè¿è¡Œå½“å‰è¿æ¥å¯ç”¨ï¼Ÿ)</span></span><br><span class="line"><span class="comment">  * å‚æ•°b2 æ˜¯å¦åœ¨æ¶ˆè´¹å®Œæˆåè‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—  ï¼ˆæ¶ˆè´¹è€…æ–­å¼€è¿æ¥ä¹‹åé˜Ÿåˆ—æ‰ä¼šè¢«åˆ é™¤æ‰ï¼‰</span></span><br><span class="line"><span class="comment">  * å‚æ•° map  é¢å¤–çš„é™„åŠ å‚æ•°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//æ¥å—æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹ï¼ŒæŒç»­ç›‘å¬é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ æœ€å¥½ä¸è¦å…³é—­è¿æ¥  åœ¨æµ‹è¯•çš„æ—¶å€™ä¸èƒ½å†@Testæ³¨é‡Šçš„æ–¹æ³•ä¸­å†™ï¼Œå› ä¸º@Testä¿®é¥°çš„æ–¹æ³•ä¸æ”¯æŒå¤šçº¿ç¨‹</span></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * å‚æ•°1 é˜Ÿåˆ— åç§°</span></span><br><span class="line"><span class="comment">  * å‚æ•°2 å¼€å§‹æ¶ˆæ¯çš„è‡ªåŠ¨ç¡®è®¤</span></span><br><span class="line"><span class="comment">  * å‚æ•°3 æ¶ˆè´¹æ—¶çš„å›è°ƒæ¥å£</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">channel.basicConsume(<span class="string">&quot;hello&quot;</span>,<span class="keyword">true</span>,<span class="keyword">new</span> DefaultConsumer(channel)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(body));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h4 id="ä»»åŠ¡æ¨¡å‹"><a href="#ä»»åŠ¡æ¨¡å‹" class="headerlink" title="ä»»åŠ¡æ¨¡å‹"></a>ä»»åŠ¡æ¨¡å‹</h4><p>â€‹    å½“æ¶ˆæ¯å¤„ç†æ¯”è¾ƒè€—æ—¶æ—¶ï¼Œç”Ÿæˆæ¶ˆæ¯çš„é€Ÿåº¦ä¼šè¿œè¿œå¤§äºæ¶ˆæ¯çš„æ¶ˆè´¹é€Ÿåº¦ï¼Œé•¿æ­¤ä»¥å¾€ï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯è¶Šæ¥è¶Šå¤šï¼Œæ— æ³•åŠæ—¶å¤„ç†ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨ä»»åŠ¡æ¨¡å‹ï¼ˆworkæ¨¡å‹ï¼‰ï¼š<strong>è®©å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„ä¿¡æ¯</strong>ã€‚é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¸€æ—¦æ¶ˆè´¹å°±ä¼šæ¶ˆå¤±ï¼Œå› æ­¤ä»»åŠ¡ä¸ä¼šè¢«é‡å¤æ‰§è¡Œã€‚</p>
<p>â€‹    ä»»åŠ¡é˜Ÿåˆ—é»˜è®¤åœ¨åˆ†å‘ä»»åŠ¡çš„æ—¶å€™æ˜¯å¹³å‡åˆ†é…ä»»åŠ¡çš„ï¼Œæ¯”å¦‚æœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¶ˆè´¹è€…æ¥æ”¶åˆ°ä»»åŠ¡æ˜¯æ€»ä»»åŠ¡çš„ä¸€èˆ¬ï¼ˆé»˜è®¤æƒ…å†µä¸‹å³ä½¿ä¸¤ä¸ªæ¶ˆè´¹è€…çš„å·¥ä½œæ•ˆç‡ä¸ç›¸åŒä¹Ÿä¼šå¹³å‡ä»»åŠ¡ï¼‰</p>
<ul>
<li>P: ç”Ÿäº§è€… ä»»åŠ¡çš„å‘å¸ƒè€…</li>
<li>C1: æ¶ˆè´¹è€…-1 é¢†å–ä»»åŠ¡å¹¶ä¸”å®Œæˆä»»åŠ¡ï¼Œå‡è®¾å®Œæˆé€Ÿåº¦è¾ƒæ…¢</li>
<li>C2: æ¶ˆè´¹è€…-2 é¢†å–ä»»åŠ¡å¹¶ä¸”å®Œæˆä»»åŠ¡ï¼Œå‡è®¾å®Œæˆé€Ÿåº¦è¾ƒå¿«</li>
</ul>
<h5 id="åŸºç¡€ç­ï¼ˆå¹³å‡ä¸»ä¹‰ï¼‰"><a href="#åŸºç¡€ç­ï¼ˆå¹³å‡ä¸»ä¹‰ï¼‰" class="headerlink" title="åŸºç¡€ç­ï¼ˆå¹³å‡ä¸»ä¹‰ï¼‰"></a>åŸºç¡€ç­ï¼ˆå¹³å‡ä¸»ä¹‰ï¼‰</h5><p>ğŸŒ°</p>
<p>Provider</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> Channel channel = utils.getChannel();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç»‘å®šå¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‚æ•°s é˜Ÿåˆ—åç§°  ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment">     * å‚æ•°b é˜Ÿåˆ—æ˜¯å¦éœ€è¦æŒä¹…åŒ–  ï¼ˆä¸åŒ…æ‹¬æ¶ˆæ¯æŒä¹…åŒ–ï¼‰</span></span><br><span class="line"><span class="comment">     * å‚æ•°b1 æ˜¯å¦éœ€è¦ç‹¬å é˜Ÿåˆ—(å½“å‰é˜Ÿåˆ—åªè¿è¡Œå½“å‰è¿æ¥å¯ç”¨ï¼Ÿ)</span></span><br><span class="line"><span class="comment">     * å‚æ•°b2 æ˜¯å¦åœ¨æ¶ˆè´¹å®Œæˆåè‡ªåŠ¨åˆ é™¤é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">     * å‚æ•° map  é¢å¤–çš„é™„åŠ å‚æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        channel.basicPublish(<span class="string">&quot;&quot;</span>,<span class="string">&quot;hello&quot;</span>,<span class="keyword">null</span>,(i+<span class="string">&quot;   hello rabbotmq&quot;</span>).getBytes());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Consumer1ï¼Œ2ä»£ç éƒ½ç›¸åŒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">RabbitMQUtils utils = <span class="keyword">new</span> RabbitMQUtils();</span><br><span class="line">Channel channel = utils.getChannel();</span><br><span class="line"></span><br><span class="line">channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥å—æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹ï¼ŒæŒç»­ç›‘å¬é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ æœ€å¥½ä¸è¦å…³é—­è¿æ¥  åœ¨æµ‹è¯•çš„æ—¶å€™ä¸èƒ½å†@Testæ³¨é‡Šçš„æ–¹æ³•ä¸­å†™ï¼Œå› ä¸º@Testä¿®é¥°çš„æ–¹æ³•ä¸æ”¯æŒå¤šçº¿ç¨‹</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 é˜Ÿåˆ— åç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 å¼€å§‹æ¶ˆæ¯çš„è‡ªåŠ¨ç¡®è®¤</span></span><br><span class="line"><span class="comment"> * å‚æ•°3 æ¶ˆè´¹æ—¶çš„å›è°ƒæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.basicConsume(<span class="string">&quot;hello&quot;</span>,<span class="keyword">true</span>,<span class="keyword">new</span> DefaultConsumer(channel)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(body));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<p><strong>ç¼ºé™·ï¼š</strong></p>
<p>â€‹        å¦‚æœä¸¤ä¸ªæ¶ˆè´¹è€…æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…çªç„¶å®•æœºï¼Œä½†æ˜¯å®ƒæ‰å¤„ç†äº†è‡ªå·±æ¶ˆæ¯æ€»é‡çš„ä¸€åŠï¼Œé‚£ä¹ˆå‰©ä¸‹çš„æ¶ˆæ¯å°±ä¼šä¸¢å¤±æ‰ã€‚</p>
<h5 id="è¿›é˜¶ç‰ˆï¼ˆèƒ½è€…å¤šåŠ³ï¼‰"><a href="#è¿›é˜¶ç‰ˆï¼ˆèƒ½è€…å¤šåŠ³ï¼‰" class="headerlink" title="è¿›é˜¶ç‰ˆï¼ˆèƒ½è€…å¤šåŠ³ï¼‰"></a>è¿›é˜¶ç‰ˆï¼ˆèƒ½è€…å¤šåŠ³ï¼‰</h5><p><code>channel.basicConsume(&quot;hello&quot;,true,new DefaultConsumer(channel))</code></p>
<p><strong>æ­¤å¤„çš„çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯autoAckï¼Œå¦‚æœä¸ºtrueåˆ™è‡ªåŠ¨å¸®æ¶ˆè´¹è€…ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯ï¼ˆä¹Ÿå°±æ˜¯ä¸ç®¡ä½ æ¶ˆè´¹è€…æœ‰æ²¡æœ‰æ‰§è¡Œå®Œéƒ½ä¸€è‚¡è„‘å…¨éƒ¨éƒ½æŠŠæ¶ˆæ¯ç»™ä½ ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰æœ‰æ¶ˆåŒ–å®Œï¼‰ï¼Œå¦åˆ™ä¸è‡ªåŠ¨ç¡®è®¤å¿…é¡»æ‰‹åŠ¨ç¡®è®¤æ‰ä¼šæ¥å—ä¸‹ä¸€ä¸ªæ¶ˆæ¯ã€‚</strong></p>
<p>Provdeirå’Œä¸Šé¢ä¸€æ ·</p>
<p>Consumer1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException </span>&#123;</span><br><span class="line">    RabbitMQUtils utils = <span class="keyword">new</span> RabbitMQUtils();</span><br><span class="line">    Channel channel = utils.getChannel();</span><br><span class="line"></span><br><span class="line">    channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.basicQos(<span class="number">1</span>);<span class="comment">//æ¯æ¬¡åªèƒ½æ¶ˆè´¹ä¸€ä¸ªï¼Œä¸ä¸€è‚¡è„‘å…¨éƒ¨æ¥å—</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥å—æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹ï¼ŒæŒç»­ç›‘å¬é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ æœ€å¥½ä¸è¦å…³é—­è¿æ¥  åœ¨æµ‹è¯•çš„æ—¶å€™ä¸èƒ½å†@Testæ³¨é‡Šçš„æ–¹æ³•ä¸­å†™ï¼Œå› ä¸º@Testä¿®é¥°çš„æ–¹æ³•ä¸æ”¯æŒå¤šçº¿ç¨‹</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‚æ•°1 é˜Ÿåˆ— åç§°</span></span><br><span class="line"><span class="comment">     * å‚æ•°2 å¼€å§‹æ¶ˆæ¯çš„è‡ªåŠ¨ç¡®è®¤</span></span><br><span class="line"><span class="comment">     * å‚æ•°3 æ¶ˆè´¹æ—¶çš„å›è°ƒæ¥å£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    channel.basicConsume(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">new</span> DefaultConsumer(channel)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(body));</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ‰‹åŠ¨ç¡®è®¤</span></span><br><span class="line"><span class="comment">             * å‚æ•°1 ç¡®è®¤é˜Ÿåˆ—ä¸­çš„å“ªä¸ªå…·ä½“æ¶ˆæ¯çš„æ ‡å¿—</span></span><br><span class="line"><span class="comment">           	 * å‚æ•°2 false æ˜¯å¦å¼€å¯å¤šä¸ªæ¶ˆæ¯åŒæ—¶ç¡®è®¤</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            channel.basicAck(envelope.getDeliveryTag(),<span class="keyword">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Consumer2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException </span>&#123;</span><br><span class="line">    RabbitMQUtils utils = <span class="keyword">new</span> RabbitMQUtils();</span><br><span class="line">    Channel channel = utils.getChannel();</span><br><span class="line"></span><br><span class="line">    channel.queueDeclare(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">false</span>,<span class="keyword">null</span>);</span><br><span class="line">    channel.basicQos(<span class="number">1</span>);<span class="comment">//æ¯æ¬¡åªèƒ½æ¶ˆè´¹ä¸€ä¸ªï¼Œä¸ä¸€è‚¡è„‘å…¨éƒ¨æ¥å—</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¥å—æ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹ï¼ŒæŒç»­ç›‘å¬é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ æœ€å¥½ä¸è¦å…³é—­è¿æ¥  åœ¨æµ‹è¯•çš„æ—¶å€™ä¸èƒ½å†@Testæ³¨é‡Šçš„æ–¹æ³•ä¸­å†™ï¼Œå› ä¸º@Testä¿®é¥°çš„æ–¹æ³•ä¸æ”¯æŒå¤šçº¿ç¨‹</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‚æ•°1 é˜Ÿåˆ— åç§°</span></span><br><span class="line"><span class="comment">     * å‚æ•°2 å¼€å§‹æ¶ˆæ¯çš„è‡ªåŠ¨ç¡®è®¤</span></span><br><span class="line"><span class="comment">     * å‚æ•°3 æ¶ˆè´¹æ—¶çš„å›è°ƒæ¥å£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    channel.basicConsume(<span class="string">&quot;hello&quot;</span>,<span class="keyword">false</span>,<span class="keyword">new</span> DefaultConsumer(channel)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(body));</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ‰‹åŠ¨ç¡®è®¤</span></span><br><span class="line"><span class="comment">             * å‚æ•°1 ç¡®è®¤é˜Ÿåˆ—ä¸­çš„å“ªä¸ªå…·ä½“æ¶ˆæ¯çš„æ ‡å¿—</span></span><br><span class="line"><span class="comment">           	 * å‚æ•°2 false æ˜¯å¦å¼€å¯å¤šä¸ªæ¶ˆæ¯åŒæ—¶ç¡®è®¤</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            channel.basicAck(envelope.getDeliveryTag(),<span class="keyword">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="å¹¿æ’­æ¨¡å‹"><a href="#å¹¿æ’­æ¨¡å‹" class="headerlink" title="å¹¿æ’­æ¨¡å‹"></a>å¹¿æ’­æ¨¡å‹</h4><p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200904094730.png" alt="image-20200904094726571"></p>
<p>â€‹    åœ¨å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œæ¶ˆæ¯å‘é€æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code>- å¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…
- **æ¯ä¸ªæ¶ˆè´¹è€…æœ‰è‡ªå·±çš„queue**
- **æ¯ä¸ªé˜Ÿåˆ—éƒ½è¦ç»‘å®šåˆ°exchange**
- **ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯åªèƒ½å‘é€åˆ°äº¤æ¢æœº**ï¼Œäº¤æ¢æœºå†³å®šè¦å‘é€ç»™å“ªä¸ªé˜Ÿåˆ—ï¼Œç”Ÿäº§è€…æ— æ³•å†³å®š
- äº¤æ¢æœºæŠŠæ¶ˆæ¯å‘é€ç»™ç»‘å®šè¿‡çš„æ‰€æœ‰é˜Ÿåˆ—
- é˜Ÿåˆ—çš„æ¶ˆè´¹è€…éƒ½èƒ½æ‹¿åˆ°æ¶ˆæ¯ï¼Œå®ç°ä¸€æ¡æ¶ˆæ¯è¢«å¤šä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹
</code></pre>
<p>â€‹    </p>
<p>ğŸŒ°</p>
<p>Provider</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Channel channel = utils.getChannel();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šé“ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment"> * å¦‚æœæŒ‡å®šäº¤æ¢æœºä¸å­˜åœ¨ä¼šè¿›è¡Œè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs&quot;</span>,<span class="string">&quot;fanout&quot;</span>);</span><br><span class="line"></span><br><span class="line">channel.basicPublish(<span class="string">&quot;logs&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="keyword">null</span>,<span class="string">&quot;fanout hello&quot;</span>.getBytes());</span><br><span class="line">utils.closeChannelAndConnection();</span><br></pre></td></tr></table></figure>

<p>ConsumerX</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">RabbitMQUtils utils = <span class="keyword">new</span> RabbitMQUtils();</span><br><span class="line">Channel channel = utils.getChannel();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šé“ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs&quot;</span>,<span class="string">&quot;fanout&quot;</span>);</span><br><span class="line"><span class="comment">//è·å–ä¸´æ—¶é˜Ÿåˆ—</span></span><br><span class="line">String queue = channel.queueDeclare().getQueue();</span><br><span class="line"><span class="comment">//ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°3 è·¯ç”±è§„åˆ™  æ­¤å¤„æ˜¯æ‰‡å½¢æ¨¡å‹ï¼Œå› æ­¤ä¸éœ€è¦æ·»åŠ è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;logs&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">channel.basicConsume(queue,<span class="keyword">true</span>,<span class="keyword">new</span> DefaultConsumer(channel)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…1&quot;</span>+<span class="keyword">new</span> String(body));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h4 id="è·¯ç”±æ¨¡å‹"><a href="#è·¯ç”±æ¨¡å‹" class="headerlink" title="è·¯ç”±æ¨¡å‹"></a>è·¯ç”±æ¨¡å‹</h4><h5 id="Direct"><a href="#Direct" class="headerlink" title="Direct"></a>Direct</h5><p>â€‹        å®šä¹‰ï¼šåœ¨æŸäº›åœºæ™¯ä¸­æˆ‘ä»¬å¸Œæœ›ä¸åŒçš„æ¶ˆæ¯è¢«ä¸åŒçš„é˜Ÿåˆ—æ¶ˆè´¹</p>
<p>â€‹        åœ¨Directæ¨¡å‹ä¸‹ï¼š</p>
<ul>
<li><p>é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šä¸èƒ½æ˜¯ä»»æ„çš„ç»‘å®šï¼Œè€Œæ˜¯éœ€è¦æŒ‡å®šä¸€ä¸ªRoutingKeyï¼ˆè·¯ç”±keyï¼‰</p>
</li>
<li><p>æ¶ˆæ¯çš„å‘é€æ–¹åœ¨å‘exchangeå‘é€æ¶ˆæ¯æ—¶ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šæ¶ˆæ¯çš„RoutingKey</p>
</li>
<li><p>Exchangeä¸å†æŠŠæ¶ˆæ¯äº¤ç»™æ¯ä¸€ä¸ªç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯æ ¹æ®æ¶ˆæ¯çš„RoutingKeyè¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰é˜Ÿåˆ—çš„RoutingKeyä¸æ¶ˆæ¯çš„RoutingKeyå®Œå…¨ä¸€è‡´æ‰ä¼šæ¥æ”¶åˆ°ä¸‹æ¶ˆæ¯</p>
<p>æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200904094812.png" alt="image-20200904094810078"></p>
</li>
</ul>
<p>â€‹        å›¾è§£</p>
<pre><code>    - P:ç”Ÿäº§è€…ï¼Œå‘exchangeå‘é€æ¶ˆæ¯ï¼Œå‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šæŒ‡å®šä¸€ä¸ªRoutingKey
    - X:äº¤æ¢æœºï¼Œæ¥æ”¶ç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œç„¶åæŠŠæ¶ˆæ¯ä¼ é€’ç»™ä¸RoutingKeyå®Œå…¨åŒ¹é…çš„é˜Ÿåˆ—
    - C1:æ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦RoutingKeyä¸ºerrorçš„æ¶ˆæ¯
    - C2ï¼šæ¶ˆè´¹è€…ï¼Œå…¶æ‰€åœ¨é˜Ÿåˆ—æŒ‡å®šäº†éœ€è¦RoutingKeyä¸ºinfoã€errorã€warningçš„æ¶ˆæ¯
</code></pre>
<p>â€‹        </p>
<p>ğŸŒ°</p>
<p>Provider</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Channel channel = utils.getChannel();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šé“ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment"> * å¦‚æœæŒ‡å®šäº¤æ¢æœºä¸å­˜åœ¨ä¼šè¿›è¡Œè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;direct&quot;</span>);</span><br><span class="line"></span><br><span class="line">String routingKey = <span class="string">&quot;info&quot;</span>;</span><br><span class="line">channel.basicPublish(<span class="string">&quot;logs_direct&quot;</span>,routingKey,<span class="keyword">null</span>,(<span class="string">&quot;hello&quot;</span>+routingKey).getBytes());</span><br><span class="line">utils.closeChannelAndConnection();</span><br></pre></td></tr></table></figure>

<p>Consumer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">RabbitMQUtils utils = <span class="keyword">new</span> RabbitMQUtils();</span><br><span class="line">Channel channel = utils.getChannel();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šé“ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;direct&quot;</span>);</span><br><span class="line"><span class="comment">//è·å–ä¸´æ—¶é˜Ÿåˆ—</span></span><br><span class="line">String queue = channel.queueDeclare().getQueue();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°3 è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;info&quot;</span>);</span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;error&quot;</span>);</span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;logs_direct&quot;</span>,<span class="string">&quot;track&quot;</span>);</span><br><span class="line"></span><br><span class="line">channel.basicConsume(queue,<span class="keyword">true</span>,<span class="keyword">new</span> DefaultConsumer(channel)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…&quot;</span>+<span class="keyword">new</span> String(body));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>â€‹    </p>
<h5 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h5><p>â€‹        Topicç±»å‹ä¸Exchangeä¸Directç›¸æ¯”ï¼Œéƒ½æ˜¯å¯ä»¥æ ¹æ®RoutingKeyæŠŠæ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ã€‚åªä¸è¿‡Topicç±»å‹çš„Exchangeå¯ä»¥è®©é˜Ÿåˆ—åœ¨ç»‘å®šRoutingKeyçš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦ã€‚è¿™ç§æ¨¡å‹RoutingKeyä¸€èˆ¬éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥ â€œ.â€åˆ†å‰²ã€‚</p>
<p>â€‹        <img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200904110731.png" alt="image-20200904105708765" style="zoom:50%;" /></p>
<p>â€‹    é€šé…ç¬¦ç±»å‹</p>
<ul>
<li><p>*</p>
<p>åŒ¹é…ä¸å¤šä¸å°‘æ°å¥½ä¸€ä¸ªå•è¯</p>
<p>å¦‚audit.*  åªèƒ½åŒ¹é…audit.irs ä¹Ÿå°±æ˜¯auditåé¢åªè·Ÿä¸€ä¸ªå•è¯</p>
</li>
<li><h1 id=""><a href="#" class="headerlink" title=""></a></h1><p>åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯</p>
<p>å¦‚audit.# åŒ¹é…audit.irs.corporationæˆ–è€…audit.irsç­‰</p>
</li>
</ul>
<p>ğŸŒ°</p>
<p>Provider</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Channel channel = utils.getChannel();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šé“ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment"> * å¦‚æœæŒ‡å®šäº¤æ¢æœºä¸å­˜åœ¨ä¼šè¿›è¡Œè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs_topic&quot;</span>,<span class="string">&quot;topic&quot;</span>);</span><br><span class="line"></span><br><span class="line">String routingKey = <span class="string">&quot;user.save&quot;</span>;</span><br><span class="line">channel.basicPublish(<span class="string">&quot;logs_topic&quot;</span>,routingKey,<span class="keyword">null</span>,(<span class="string">&quot;hello&quot;</span>+routingKey).getBytes());</span><br><span class="line">utils.closeChannelAndConnection();</span><br></pre></td></tr></table></figure>

<p>Consumer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">RabbitMQUtils utils = <span class="keyword">new</span> RabbitMQUtils();</span><br><span class="line">Channel channel = utils.getChannel();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šé“ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºç±»å‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.exchangeDeclare(<span class="string">&quot;logs_topic&quot;</span>,<span class="string">&quot;topic&quot;</span>);</span><br><span class="line"><span class="comment">//è·å–ä¸´æ—¶é˜Ÿåˆ—</span></span><br><span class="line">String queue = channel.queueDeclare().getQueue();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‚æ•°1 é˜Ÿåˆ—åç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°2 äº¤æ¢æœºåç§°</span></span><br><span class="line"><span class="comment"> * å‚æ•°3 è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">channel.queueBind(queue,<span class="string">&quot;logs_topic&quot;</span>,<span class="string">&quot;user.*&quot;</span>);</span><br><span class="line"></span><br><span class="line">channel.basicConsume(queue,<span class="keyword">true</span>,<span class="keyword">new</span> DefaultConsumer(channel)&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, <span class="keyword">byte</span>[] body)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…&quot;</span>+<span class="keyword">new</span> String(body));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbbitMQ%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbbitMQ%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/" class="post-title-link" itemprop="url">RabbitMQä½¿ç”¨æƒ…å†µ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:41:01" itemprop="dateModified" datetime="2021-02-13T08:41:01+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RabbitMQ/" itemprop="url" rel="index"><span itemprop="name">RabbitMQ</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbbitMQ%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/RabbbitMQ%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>12</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="å¼‚æ­¥å¤„ç†"><a href="#å¼‚æ­¥å¤„ç†" class="headerlink" title="å¼‚æ­¥å¤„ç†"></a>å¼‚æ­¥å¤„ç†</h4><p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200904210658.png" alt="image-20200904210654601"></p>
<h4 id="åº”ç”¨è§£è€¦"><a href="#åº”ç”¨è§£è€¦" class="headerlink" title="åº”ç”¨è§£è€¦"></a>åº”ç”¨è§£è€¦</h4><p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200904210803.png" alt="image-20200904210801377"></p>
<h4 id="æµé‡å‰Šå³°"><a href="#æµé‡å‰Šå³°" class="headerlink" title="æµé‡å‰Šå³°"></a>æµé‡å‰Šå³°</h4><p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200904211618.png" alt="image-20200904211616017"></p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/SpringBoot%E6%95%B4%E5%90%88RabbitMQ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/SpringBoot%E6%95%B4%E5%90%88RabbitMQ/" class="post-title-link" itemprop="url">SpringBootæ•´åˆRabbitMQ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:41:43" itemprop="dateModified" datetime="2021-02-13T08:41:43+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RabbitMQ/" itemprop="url" rel="index"><span itemprop="name">RabbitMQ</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/SpringBoot%E6%95%B4%E5%90%88RabbitMQ/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/SpringBoot%E6%95%B4%E5%90%88RabbitMQ/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.5k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>3 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>



<h4 id="äº”ç§Provider"><a href="#äº”ç§Provider" class="headerlink" title="äº”ç§Provider"></a>äº”ç§Provider</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">RabbitTemplate template;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHelloWorld</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    template.convertAndSend(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testWork</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        template.convertAndSend(<span class="string">&quot;work&quot;</span>,<span class="string">&quot;Hello World &quot;</span>+i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFanout</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    template.convertAndSend(<span class="string">&quot;springboot_logs&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;Fanoutæ¨¡å‹&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDirect</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    template.convertAndSend(<span class="string">&quot;direct&quot;</span>,<span class="string">&quot;error&quot;</span>,<span class="string">&quot;directæ¨¡å‹&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTopic</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    template.convertAndSend(<span class="string">&quot;topic&quot;</span>,<span class="string">&quot;error.error&quot;</span>,<span class="string">&quot;topicæ¨¡å‹&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="äº”ç§Consumer"><a href="#äº”ç§Consumer" class="headerlink" title="äº”ç§Consumer"></a>äº”ç§Consumer</h4><h5 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RabbitListener(queuesToDeclare = @Queue(&quot;hello&quot;))</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloConsumer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitHandler</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message   &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Work"><a href="#Work" class="headerlink" title="Work"></a>Work</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WorkConsumer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queuesToDeclare = @Queue(&quot;work&quot;))</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive1</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message1 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queuesToDeclare = @Queue(&quot;work&quot;))</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive2</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;message2 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Direct"><a href="#Direct" class="headerlink" title="Direct"></a>Direct</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DirectConsumer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(</span></span><br><span class="line"><span class="meta">                    value = @Queue,//æœªæŒ‡å®šqueueåç§°åˆ™åˆ›å»ºä¸´æ—¶queue</span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;direct&quot;,type = &quot;direct&quot;),//ç»‘å®šäº¤æ¢æœº é»˜è®¤ç±»å‹æ—¶direct</span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;info&quot;,&quot;error&quot;&#125;</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive1</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;1 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(</span></span><br><span class="line"><span class="meta">                    value = @Queue,//æœªæŒ‡å®šqueueåç§°åˆ™åˆ›å»ºä¸´æ—¶queue</span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;direct&quot;,type = &quot;direct&quot;),//ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;info&quot;&#125;</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive2</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;2 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TopicConsumer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(</span></span><br><span class="line"><span class="meta">                    value = @Queue,//æœªæŒ‡å®šqueueåç§°åˆ™åˆ›å»ºä¸´æ—¶queue</span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;topic&quot;,type = &quot;topic&quot;),//ç»‘å®šäº¤æ¢æœº é»˜è®¤ç±»å‹æ—¶direct</span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;info.*&quot;,&quot;error.*&quot;&#125;</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive1</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;1 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(</span></span><br><span class="line"><span class="meta">                    value = @Queue,//æœªæŒ‡å®šqueueåç§°åˆ™åˆ›å»ºä¸´æ—¶queue</span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;topic&quot;,type = &quot;topic&quot;),//ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="meta">                    key = &#123;&quot;info.#&quot;,&quot;#.error.#&quot;&#125;</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive2</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;2 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Fanout"><a href="#Fanout" class="headerlink" title="Fanout"></a>Fanout</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FanoutConsumer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(</span></span><br><span class="line"><span class="meta">                    value = @Queue,//æœªæŒ‡å®šqueueåç§°åˆ™åˆ›å»ºä¸´æ—¶queue</span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;springboot_logs&quot;,type = &quot;fanout&quot;)//ç»‘å®šäº¤æ¢æœº</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive1</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;1 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(bindings = &#123;</span></span><br><span class="line"><span class="meta">            @QueueBinding(</span></span><br><span class="line"><span class="meta">                    value = @Queue,//æœªæŒ‡å®šqueueåç§°åˆ™åˆ›å»ºä¸´æ—¶queue</span></span><br><span class="line"><span class="meta">                    exchange = @Exchange(value = &quot;springboot_logs&quot;,type = &quot;fanout&quot;)</span></span><br><span class="line"><span class="meta">            )</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receive2</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;2 &quot;</span>+message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">Springé¢è¯•é¢˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38 / ä¿®æ”¹æ—¶é—´ï¼š14:20:35" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/Spring%E9%9D%A2%E8%AF%95%E9%A2%98/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>1.3k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><p>Spring Frameworkä¸­æœ‰å“ªäº›é‡è¦æ¨¡å—</p>
<ul>
<li>spring-coreï¼šSpringåŸºç¡€çš„APIæ¨¡å—ï¼Œæ¯”å¦‚èµ„æºç®¡ç†ã€æ³›å‹å¤„ç†</li>
<li>spring-beansï¼šSpring Beanç›¸å…³ï¼Œæ¯”å¦‚ä¾èµ–æŸ¥æ‰¾ï¼Œä¾èµ–æ³¨å…¥</li>
<li>spring-aopï¼šSpring AOPå¤„ç†</li>
<li>spring-contextï¼šäº‹ä»¶é©±åŠ¨ã€æ³¨è§£é©±åŠ¨ã€æ¨¡å—é©±åŠ¨</li>
<li>spring-expressionï¼šSpringè¡¨è¾¾å¼è¯­è¨€æ¨¡å—</li>
</ul>
</li>
<li><p>ä»€ä¹ˆæ˜¯IoC</p>
<p>IoCæ˜¯åè½¬æ§åˆ¶ï¼ˆ<strong>å±äºæ¨çš„æ¨¡å¼ï¼Œè€Œä¸æ˜¯æ‹‰çš„æ¨¡å¼</strong>ï¼‰ï¼Œç±»ä¼¼äºå¥½è±ååŸåˆ™ï¼Œä¸»è¦æœ‰ä¾èµ–æŸ¥æ‰¾å’Œä¾èµ–æ³¨å…¥ä¸¤ç§å®ç°æ–¹å¼</p>
</li>
<li><p>ä¾èµ–æ³¨å…¥ä¸­çš„æ„é€ å™¨æ³¨å…¥å’Œsetteræ³¨å…¥æœ‰å“ªäº›å¥½å¤„ä¸åå¤„</p>
<ul>
<li><p>æ„é€ å™¨æ³¨å…¥</p>
<ul>
<li>å¥½å¤„<ol>
<li>Springå›¢é˜Ÿæ¨èæ„é€ å™¨æ³¨å…¥ï¼Œå› ä¸ºä¸€èˆ¬æˆ‘ä»¬çš„ç±»ä¸­çš„å±æ€§éƒ½ä¼šå£°æ˜æˆfinalç±»å‹ï¼Œé‚£ä¹ˆä½¿ç”¨æ„é€ å™¨æ³¨å…¥çš„è¯å¯ä»¥ä¿è¯å¯¹è±¡çš„ä¸å˜æ€§å¹¶ä¸”å¯ä»¥ä¿è¯ä¾èµ–çš„å¯¹è±¡ä¸ä¸ºnullï¼Œ<font color=red>setteræ³¨å…¥æœ€å¥½ç”¨åœ¨å¯é€‰ä¾èµ–çš„æ³¨å…¥ä¸Š</font></li>
<li>å¯ä»¥ä¿è¯å¯¹è±¡æ³¨å…¥çš„é¡ºåº</li>
</ol>
</li>
<li>åå¤„<ol>
<li>å¦‚æœæ„é€ å™¨å¯¹è±¡å¤ªå¤šçš„è¯ï¼Œæœ€å¥½å°†å…¶æ‹†è§£å¼€æ¥ï¼Œé¿å…å•ä¸€ç±»çš„èŒè´£è¿‡å¤š</li>
</ol>
</li>
</ul>
</li>
<li><p>setteræ³¨å…¥</p>
<ul>
<li><p>å¥½å¤„</p>
<ol>
<li>å¯ä»¥å¾ˆå¥½çš„è¦†ç›–æ‰é»˜è®¤å€¼</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>ä¾èµ–æŸ¥æ‰¾å’Œä¾èµ–æ³¨å…¥åŒºåˆ«</p>
<ul>
<li>ä¾èµ–æŸ¥æ‰¾æ˜¯ä¸»åŠ¨æˆ–è€…æ‰‹åŠ¨çš„ä¾èµ–æŸ¥æ‰¾æ–¹å¼ï¼Œé€šå¸¸éœ€è¦ä¾èµ–å®¹å™¨æˆ–è€…æ ‡å‡†APIçš„å®ç°</li>
<li>ä¾èµ–æ³¨å…¥åˆ™æ˜¯æ‰‹åŠ¨æˆ–è€…è‡ªåŠ¨ä¾èµ–ç»‘å®šçš„æ–¹å¼ï¼Œæ— éœ€ä¾èµ–ç‰¹å®šçš„å®¹å™¨å’ŒAPI</li>
</ul>
</li>
<li><p>Springä½œä¸ºIoCå®¹å™¨çš„ä¼˜åŠ¿</p>
<ol>
<li>å…¸å‹çš„IoCç®¡ç†ï¼Œä¾èµ–æŸ¥æ‰¾å’Œä¾èµ–æ³¨å…¥</li>
<li>AOPæŠ½è±¡</li>
<li>äº‹åŠ¡æŠ½è±¡</li>
<li>äº‹ä»¶æœºåˆ¶</li>
<li>SPIæ‰©å±•</li>
<li>å¼ºå¤§çš„ç¬¬ä¸‰æ–¹æ•´åˆ</li>
<li>æ˜“æµ‹è¯•æ€§</li>
<li>æ›´å¥½çš„é¢å‘å¯¹è±¡</li>
</ol>
</li>
</ol>
<h3 id="Spring-Bean"><a href="#Spring-Bean" class="headerlink" title="Spring Bean"></a>Spring Bean</h3><ol>
<li><p>å¦‚ä½•æ³¨å†Œä¸€ä¸ªSpring Bean</p>
<p>é€šè¿‡BeanDefinitionå’Œå¤–éƒ¨å•ä½“å¯¹è±¡è¿›è¡Œæ³¨å†Œ</p>
<p>åè€…å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonBeanRegistrationDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnnotationConfigApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext();</span><br><span class="line">        UserFactory factory = <span class="keyword">new</span> DefaultUserFactory();</span><br><span class="line">        ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();</span><br><span class="line">        beanFactory.registerSingleton(<span class="string">&quot;userFactory&quot;</span>,factory);</span><br><span class="line"></span><br><span class="line">        context.refresh();</span><br><span class="line"></span><br><span class="line">        DefaultUserFactory factoryLookup = context.getBean(DefaultUserFactory.class);</span><br><span class="line">        System.out.println(factory==factoryLookup);</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="2">
<li><p>ä»€ä¹ˆæ˜¯Spring BeanDefinition</p>
<p>å®šä¹‰Beanå…ƒä¿¡æ¯çš„æ¥å£ï¼Œè¯¥æ¥å£å…è®¸æˆ‘ä»¬å­˜å‚¨Beançš„å„ç§ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–æ–¹æ³•ã€é”€æ¯æ–¹æ³•ã€ä½œç”¨åŸŸç­‰ç­‰</p>
<p>åŸºæœ¬ä¸ŠXMLé…ç½®Beançš„æ‰€æœ‰å­—æ®µå’Œè¯¥æ¥å£ä¸­çš„èµ„æºæ˜¯ä¸€ä¸€å¯¹åº”çš„</p>
</li>
</ol>
<ol start="3">
<li>Springå®¹å™¨æ˜¯æ€æ ·ç®¡ç†æ³¨å†ŒBean</li>
</ol>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/" class="post-title-link" itemprop="url">é…ç½®è§£æ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:39:40" itemprop="dateModified" datetime="2021-02-13T08:39:40+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis/" itemprop="url" rel="index"><span itemprop="name">Mybatis</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>7.3k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>7 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
</blockquote>
<ul>
<li>mybatis-config.xml ç³»ç»Ÿæ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
<li>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</li>
<li>èƒ½é…ç½®çš„å†…å®¹å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">configurationï¼ˆé…ç½®ï¼‰</span><br><span class="line">propertiesï¼ˆå±æ€§ï¼‰</span><br><span class="line">settingsï¼ˆè®¾ç½®ï¼‰</span><br><span class="line">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</span><br><span class="line">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</span><br><span class="line">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</span><br><span class="line">pluginsï¼ˆæ’ä»¶ï¼‰</span><br><span class="line">environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</span><br><span class="line">environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</span><br><span class="line">dataSourceï¼ˆæ•°æ®æºï¼‰</span><br><span class="line">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</span><br><span class="line">mappersï¼ˆæ˜ å°„å™¨ï¼‰</span><br><span class="line">&lt;!-- æ³¨æ„å…ƒç´ èŠ‚ç‚¹çš„é¡ºåºï¼é¡ºåºä¸å¯¹ä¼šæŠ¥é”™ --&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥é˜…è¯» mybatis-config.xml ä¸Šé¢çš„dtdçš„å¤´æ–‡ä»¶ï¼</p>
<blockquote>
<p>environmentså…ƒç´ </p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;...&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>é…ç½®MyBatisçš„å¤šå¥—è¿è¡Œç¯å¢ƒï¼Œå°†SQLæ˜ å°„åˆ°å¤šä¸ªä¸åŒçš„æ•°æ®åº“ä¸Šï¼Œå¿…é¡»æŒ‡å®šå…¶ä¸­ä¸€ä¸ªä¸ºé»˜è®¤è¿è¡Œç¯å¢ƒï¼ˆé€šè¿‡defaultæŒ‡å®šï¼‰</p>
</li>
<li><p>å­å…ƒç´ èŠ‚ç‚¹ï¼š<strong>environment</strong></p>
</li>
<li><ul>
<li><p>dataSource å…ƒç´ ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC è¿æ¥å¯¹è±¡çš„èµ„æºã€‚</p>
</li>
<li><p>æ•°æ®æºæ˜¯å¿…é¡»é…ç½®çš„ã€‚</p>
</li>
<li><p>æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type=&quot;[UNPOOLED|POOLED|JNDI]&quot;ï¼‰</span><br></pre></td></tr></table></figure></li>
<li><p>unpooledï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°åªæ˜¯æ¯æ¬¡è¢«è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚</p>
</li>
<li><p><strong>pooled</strong>ï¼šè¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ , è¿™æ˜¯ä¸€ç§ä½¿å¾—å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚çš„æµè¡Œå¤„ç†æ–¹å¼ã€‚</p>
</li>
<li><p>jndiï¼šè¿™ä¸ªæ•°æ®æºçš„å®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ Spring æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„å¼•ç”¨ã€‚</p>
</li>
<li><p>æ•°æ®æºä¹Ÿæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„å®ç°ï¼Œæ¯”å¦‚dbcpï¼Œc3p0ï¼Œdruidç­‰ç­‰â€¦.</p>
</li>
<li><p>è¯¦æƒ…ï¼šç‚¹å‡»æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</p>
</li>
<li><p>è¿™ä¸¤ç§äº‹åŠ¡ç®¡ç†å™¨ç±»å‹éƒ½ä¸éœ€è¦è®¾ç½®ä»»ä½•å±æ€§ã€‚</p>
</li>
<li><p>å…·ä½“çš„ä¸€å¥—ç¯å¢ƒï¼Œé€šè¿‡è®¾ç½®idè¿›è¡ŒåŒºåˆ«ï¼Œidä¿è¯å”¯ä¸€ï¼</p>
</li>
<li><p>å­å…ƒç´ èŠ‚ç‚¹ï¼štransactionManager - [ äº‹åŠ¡ç®¡ç†å™¨ ]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è¯­æ³• --&gt;</span><br><span class="line">&lt;transactionManager type=&quot;[ JDBC | MANAGED ]&quot;/&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>å­å…ƒç´ èŠ‚ç‚¹ï¼š<strong>æ•°æ®æºï¼ˆdataSourceï¼‰</strong></p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>mapperså…ƒç´ </p>
</blockquote>
<p><strong>mappers</strong></p>
<ul>
<li>æ˜ å°„å™¨ : å®šä¹‰æ˜ å°„SQLè¯­å¥æ–‡ä»¶</li>
<li>æ—¢ç„¶ MyBatis çš„è¡Œä¸ºå…¶ä»–å…ƒç´ å·²ç»é…ç½®å®Œäº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±è¦å®šä¹‰ SQL æ˜ å°„è¯­å¥äº†ã€‚ä½†æ˜¯é¦–å…ˆæˆ‘ä»¬éœ€è¦å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›è¯­å¥ã€‚Java åœ¨è‡ªåŠ¨æŸ¥æ‰¾è¿™æ–¹é¢æ²¡æœ‰æä¾›ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œæ‰€ä»¥æœ€ä½³çš„æ–¹å¼æ˜¯å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾æ˜ å°„æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œ æˆ–å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆåŒ…æ‹¬ <code>file:///</code> çš„ URLï¼‰ï¼Œæˆ–ç±»åå’ŒåŒ…åç­‰ã€‚æ˜ å°„å™¨æ˜¯MyBatisä¸­æœ€æ ¸å¿ƒçš„ç»„ä»¶ä¹‹ä¸€ï¼Œåœ¨MyBatis 3ä¹‹å‰ï¼Œåªæ”¯æŒxmlæ˜ å°„å™¨ï¼Œå³ï¼šæ‰€æœ‰çš„SQLè¯­å¥éƒ½å¿…é¡»åœ¨xmlæ–‡ä»¶ä¸­é…ç½®ã€‚è€Œä»MyBatis 3å¼€å§‹ï¼Œè¿˜æ”¯æŒæ¥å£æ˜ å°„å™¨ï¼Œè¿™ç§æ˜ å°„å™¨æ–¹å¼å…è®¸ä»¥Javaä»£ç çš„æ–¹å¼æ³¨è§£å®šä¹‰SQLè¯­å¥ï¼Œéå¸¸ç®€æ´ã€‚</li>
</ul>
<p><strong>å¼•å…¥èµ„æºæ–¹å¼</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å</span></span><br><span class="line"><span class="comment">éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨</span></span><br><span class="line"><span class="comment">ä½†æ˜¯éœ€è¦é…ç½®æ–‡ä»¶åç§°å’Œæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”ä½äºåŒä¸€ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.builder&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>Mapperæ–‡ä»¶</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">       <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>namespaceä¸­æ–‡æ„æ€ï¼šå‘½åç©ºé—´ï¼Œä½œç”¨å¦‚ä¸‹ï¼š</p>
</li>
<li><ul>
<li>namespaceçš„å‘½åå¿…é¡»è·ŸæŸä¸ªæ¥å£åŒå</li>
<li>æ¥å£ä¸­çš„æ–¹æ³•ä¸æ˜ å°„æ–‡ä»¶ä¸­sqlè¯­å¥idåº”è¯¥ä¸€ä¸€å¯¹åº”</li>
</ul>
</li>
<li><ol>
<li>namespaceå’Œå­å…ƒç´ çš„idè”åˆä¿è¯å”¯ä¸€  , åŒºåˆ«ä¸åŒçš„mapper</li>
<li>ç»‘å®šDAOæ¥å£</li>
<li>namespaceå‘½åè§„åˆ™ : åŒ…å+ç±»å</li>
</ol>
</li>
</ul>
<p>MyBatis çš„çœŸæ­£å¼ºå¤§åœ¨äºå®ƒçš„æ˜ å°„è¯­å¥ï¼Œè¿™æ˜¯å®ƒçš„é­”åŠ›æ‰€åœ¨ã€‚ç”±äºå®ƒçš„å¼‚å¸¸å¼ºå¤§ï¼Œæ˜ å°„å™¨çš„ XML æ–‡ä»¶å°±æ˜¾å¾—ç›¸å¯¹ç®€å•ã€‚å¦‚æœæ‹¿å®ƒè·Ÿå…·æœ‰ç›¸åŒåŠŸèƒ½çš„ JDBC ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œä½ ä¼šç«‹å³å‘ç°çœæ‰äº†å°†è¿‘ 95% çš„ä»£ç ã€‚MyBatis ä¸ºèšç„¦äº SQL è€Œæ„å»ºï¼Œä»¥å°½å¯èƒ½åœ°ä¸ºä½ å‡å°‘éº»çƒ¦ã€‚</p>
<blockquote>
<p>Propertiesä¼˜åŒ–</p>
</blockquote>
<p>æ•°æ®åº“è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚å…·ä½“çš„å®˜æ–¹æ–‡æ¡£</p>
<p>æˆ‘ä»¬æ¥ä¼˜åŒ–æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶</p>
<p>ç¬¬ä¸€æ­¥ ; åœ¨èµ„æºç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªdb.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒæ­¥ : å°†æ–‡ä»¶å¯¼å…¥properties é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--å¯¼å…¥propertiesæ–‡ä»¶--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ›´å¤šæ“ä½œï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼ã€æ¼”ç¤ºå¸¦é¢†å­¦ä¹ ã€‘</p>
<ul>
<li>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é—®é¢˜</li>
<li>æ–°ç‰¹æ€§ï¼šä½¿ç”¨å ä½ç¬¦</li>
</ul>
<blockquote>
<p>typeAliasesä¼˜åŒ–</p>
</blockquote>
<p>ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚å®ƒåªå’Œ XML é…ç½®æœ‰å…³ï¼Œå­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®åˆ«å,æ³¨æ„é¡ºåº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“è¿™æ ·é…ç½®æ—¶ï¼Œ<code>User</code>å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨<code>com.kuang.pojo.User</code>çš„åœ°æ–¹ã€‚</p>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.kuang.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ¯ä¸€ä¸ªåœ¨åŒ… <code>com.kuang.pojo</code> ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚</p>
<p>è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å»å®˜ç½‘æŸ¥çœ‹ä¸€ä¸‹Mybatisé»˜è®¤çš„ä¸€äº›ç±»å‹åˆ«åï¼</p>
<blockquote>
<p>å…¶ä»–é…ç½®æµè§ˆ</p>
</blockquote>
<p><strong>è®¾ç½®</strong></p>
<ul>
<li><p>è®¾ç½®ï¼ˆsettingsï¼‰ç›¸å…³ =&gt; æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</p>
</li>
<li><ul>
<li>æ‡’åŠ è½½</li>
<li>æ—¥å¿—å®ç°</li>
<li>ç¼“å­˜å¼€å¯å…³é—­</li>
</ul>
</li>
<li><p>ä¸€ä¸ªé…ç½®å®Œæ•´çš„ settings å…ƒç´ çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;multipleResultSetsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useColumnLabel&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useGeneratedKeys&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PARTIAL&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingUnknownColumnBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;WARNING&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultExecutorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SIMPLE&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultStatementTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultFetchSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;safeRowBoundsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;localCacheScope&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SESSION&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTypeForNull&quot;</span> <span class="attr">value</span>=<span class="string">&quot;OTHER&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadTriggerMethods&quot;</span> <span class="attr">value</span>=<span class="string">&quot;equals,clone,hashCode,toString&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>ç±»å‹å¤„ç†å™¨</strong></p>
<ul>
<li>æ— è®ºæ˜¯ MyBatis åœ¨é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ä¸­è®¾ç½®ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¿˜æ˜¯ä»ç»“æœé›†ä¸­å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œ éƒ½ä¼šç”¨ç±»å‹å¤„ç†å™¨å°†è·å–çš„å€¼ä»¥åˆé€‚çš„æ–¹å¼è½¬æ¢æˆ Java ç±»å‹ã€‚</li>
<li>ä½ å¯ä»¥é‡å†™ç±»å‹å¤„ç†å™¨æˆ–åˆ›å»ºä½ è‡ªå·±çš„ç±»å‹å¤„ç†å™¨æ¥å¤„ç†ä¸æ”¯æŒçš„æˆ–éæ ‡å‡†çš„ç±»å‹ã€‚ã€äº†è§£å³å¯ã€‘</li>
</ul>
<p><strong>å¯¹è±¡å·¥å‚</strong></p>
<ul>
<li>MyBatis æ¯æ¬¡åˆ›å»ºç»“æœå¯¹è±¡çš„æ–°å®ä¾‹æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼ˆObjectFactoryï¼‰å®ä¾‹æ¥å®Œæˆã€‚</li>
<li>é»˜è®¤çš„å¯¹è±¡å·¥å‚éœ€è¦åšçš„ä»…ä»…æ˜¯å®ä¾‹åŒ–ç›®æ ‡ç±»ï¼Œè¦ä¹ˆé€šè¿‡é»˜è®¤æ„é€ æ–¹æ³•ï¼Œè¦ä¹ˆåœ¨å‚æ•°æ˜ å°„å­˜åœ¨çš„æ—¶å€™é€šè¿‡æœ‰å‚æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–ã€‚</li>
<li>å¦‚æœæƒ³è¦†ç›–å¯¹è±¡å·¥å‚çš„é»˜è®¤è¡Œä¸ºï¼Œåˆ™å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„å¯¹è±¡å·¥å‚æ¥å®ç°ã€‚ã€äº†è§£å³å¯ã€‘</li>
</ul>
<blockquote>
<p>ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</p>
</blockquote>
<p><strong>ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ</strong></p>
<p>ç†è§£æˆ‘ä»¬ç›®å‰å·²ç»è®¨è®ºè¿‡çš„ä¸åŒä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç±»æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å…ˆç”»ä¸€ä¸ªæµç¨‹å›¾ï¼Œåˆ†æä¸€ä¸‹Mybatisçš„æ‰§è¡Œè¿‡ç¨‹ï¼</p>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200803163346.png" alt="img"></p>
<p><strong>ä½œç”¨åŸŸç†è§£</strong></p>
<ul>
<li>SqlSessionFactoryBuilder çš„ä½œç”¨åœ¨äºåˆ›å»º SqlSessionFactoryï¼Œåˆ›å»ºæˆåŠŸåï¼ŒSqlSessionFactoryBuilder å°±å¤±å»äº†ä½œç”¨ï¼Œæ‰€ä»¥å®ƒåªèƒ½å­˜åœ¨äºåˆ›å»º SqlSessionFactory çš„æ–¹æ³•ä¸­ï¼Œè€Œä¸è¦è®©å…¶é•¿æœŸå­˜åœ¨ã€‚å› æ­¤ <strong>SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸ</strong>ï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚</li>
<li>SqlSessionFactory å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œå®ƒçš„ä½œç”¨æ˜¯åˆ›å»º SqlSession æ¥å£å¯¹è±¡ã€‚å› ä¸º MyBatis çš„æœ¬è´¨å°±æ˜¯ Java å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œæ‰€ä»¥ SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå­˜åœ¨äºæ•´ä¸ª MyBatis çš„åº”ç”¨ä¹‹ä¸­ï¼Œæ‰€ä»¥ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±è¦é•¿æœŸä¿å­˜å®ƒï¼Œç›´è‡³ä¸å†ä½¿ç”¨ MyBatis åº”ç”¨ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸º SqlSessionFactory çš„ç”Ÿå‘½å‘¨æœŸå°±ç­‰åŒäº MyBatis çš„åº”ç”¨å‘¨æœŸã€‚</li>
<li>ç”±äº SqlSessionFactory æ˜¯ä¸€ä¸ªå¯¹æ•°æ®åº“çš„è¿æ¥æ± ï¼Œæ‰€ä»¥å®ƒå æ®ç€æ•°æ®åº“çš„è¿æ¥èµ„æºã€‚å¦‚æœåˆ›å»ºå¤šä¸ª SqlSessionFactoryï¼Œé‚£ä¹ˆå°±å­˜åœ¨å¤šä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œè¿™æ ·ä¸åˆ©äºå¯¹æ•°æ®åº“èµ„æºçš„æ§åˆ¶ï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®åº“è¿æ¥èµ„æºè¢«æ¶ˆè€—å…‰ï¼Œå‡ºç°ç³»ç»Ÿå®•æœºç­‰æƒ…å†µï¼Œæ‰€ä»¥å°½é‡é¿å…å‘ç”Ÿè¿™æ ·çš„æƒ…å†µã€‚</li>
<li>å› æ­¤åœ¨ä¸€èˆ¬çš„åº”ç”¨ä¸­æˆ‘ä»¬å¾€å¾€å¸Œæœ› SqlSessionFactory ä½œä¸ºä¸€ä¸ªå•ä¾‹ï¼Œè®©å®ƒåœ¨åº”ç”¨ä¸­è¢«å…±äº«ã€‚æ‰€ä»¥è¯´ <strong>SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚</strong></li>
<li>å¦‚æœè¯´ SqlSessionFactory ç›¸å½“äºæ•°æ®åº“è¿æ¥æ± ï¼Œé‚£ä¹ˆ SqlSession å°±ç›¸å½“äºä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ˆConnection å¯¹è±¡ï¼‰ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œé¢æ‰§è¡Œå¤šæ¡ SQLï¼Œç„¶åé€šè¿‡å®ƒçš„ commitã€rollback ç­‰æ–¹æ³•ï¼Œæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚æ‰€ä»¥å®ƒåº”è¯¥å­˜æ´»åœ¨ä¸€ä¸ªä¸šåŠ¡è¯·æ±‚ä¸­ï¼Œå¤„ç†å®Œæ•´ä¸ªè¯·æ±‚åï¼Œåº”è¯¥å…³é—­è¿™æ¡è¿æ¥ï¼Œè®©å®ƒå½’è¿˜ç»™ SqlSessionFactoryï¼Œå¦åˆ™æ•°æ®åº“èµ„æºå°±å¾ˆå¿«è¢«è€—è´¹ç²¾å…‰ï¼Œç³»ç»Ÿå°±ä¼šç˜«ç—ªï¼Œæ‰€ä»¥ç”¨ tryâ€¦catchâ€¦finallyâ€¦ è¯­å¥æ¥ä¿è¯å…¶æ­£ç¡®å…³é—­ã€‚</li>
<li><strong>æ‰€ä»¥ SqlSession çš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200803163354" alt="img"></p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">åˆ†é¡µå¤„ç†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:39:21" itemprop="dateModified" datetime="2021-02-13T08:39:21+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis/" itemprop="url" rel="index"><span itemprop="name">Mybatis</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%88%86%E9%A1%B5%E5%A4%84%E7%90%86/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>378</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="åˆ†é¡µç›®çš„"><a href="#åˆ†é¡µç›®çš„" class="headerlink" title="åˆ†é¡µç›®çš„"></a>åˆ†é¡µç›®çš„</h4><p>â€‹    åœ¨å­¦ä¹ mybatisç­‰æŒä¹…å±‚æ¡†æ¶çš„æ—¶å€™ï¼Œä¼šç»å¸¸å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå¦‚æœæŸ¥è¯¢å¤§é‡æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä½¿ç”¨åˆ†é¡µè¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å¤„ç†å°éƒ¨åˆ†æ•°æ®ï¼Œè¿™æ ·å¯¹æ•°æ®åº“å‹åŠ›å°±åœ¨å¯æ§èŒƒå›´å†…ã€‚</p>
<p>ä½¿ç”¨Limitåˆ†é¡µ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#è¯­æ³•</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT stratIndexï¼ŒpageSize</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT <span class="number">5</span>,<span class="number">10</span>; <span class="operator">/</span><span class="operator">/</span> æ£€ç´¢è®°å½•è¡Œ <span class="number">6</span><span class="number">-15</span>  </span><br><span class="line"></span><br><span class="line">#ä¸ºäº†æ£€ç´¢ä»æŸä¸€ä¸ªåç§»é‡åˆ°è®°å½•é›†çš„ç»“æŸæ‰€æœ‰çš„è®°å½•è¡Œï¼Œå¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ä¸º <span class="number">-1</span>ï¼š    </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT <span class="number">95</span>,<span class="number">-1</span>; <span class="operator">/</span><span class="operator">/</span> æ£€ç´¢è®°å½•è¡Œ <span class="number">96</span><span class="operator">-</span>last.  </span><br><span class="line"></span><br><span class="line">#å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®ï¼š   </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">table</span> LIMIT <span class="number">5</span>; <span class="operator">/</span><span class="operator">/</span>æ£€ç´¢å‰ <span class="number">5</span> ä¸ªè®°å½•è¡Œ  </span><br><span class="line"></span><br><span class="line">#æ¢å¥è¯è¯´ï¼ŒLIMIT n ç­‰ä»·äº LIMIT <span class="number">0</span>,nã€‚ </span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E7%BC%93%E5%AD%98/" class="post-title-link" itemprop="url">ç¼“å­˜</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:39:30" itemprop="dateModified" datetime="2021-02-13T08:39:30+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis/" itemprop="url" rel="index"><span itemprop="name">Mybatis</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E7%BC%93%E5%AD%98/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E7%BC%93%E5%AD%98/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>3.3k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>3 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Mybatisç¼“å­˜"><a href="#Mybatisç¼“å­˜" class="headerlink" title="Mybatisç¼“å­˜"></a>Mybatisç¼“å­˜</h4><ul>
<li><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</li>
<li><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong></p>
</li>
<li><ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</li>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li>
<li>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</li>
</ul>
</li>
</ul>
<hr>
<h4 id="ä¸€çº§ç¼“å­˜ï¼ˆé»˜è®¤ç³»ç»Ÿè‡ªåŠ¨å¼€å¯ï¼‰"><a href="#ä¸€çº§ç¼“å­˜ï¼ˆé»˜è®¤ç³»ç»Ÿè‡ªåŠ¨å¼€å¯ï¼‰" class="headerlink" title="ä¸€çº§ç¼“å­˜ï¼ˆé»˜è®¤ç³»ç»Ÿè‡ªåŠ¨å¼€å¯ï¼‰"></a>ä¸€çº§ç¼“å­˜ï¼ˆé»˜è®¤ç³»ç»Ÿè‡ªåŠ¨å¼€å¯ï¼‰</h4><p>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š</p>
<ul>
<li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚</li>
<li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼›</li>
</ul>
<p>ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯ä¸€ç›´å¼€å¯çš„ï¼Œæˆ‘ä»¬å…³é—­ä¸äº†å®ƒï¼›</p>
<p>ä¸€çº§ç¼“å­˜å¤±æ•ˆæƒ…å†µï¼šæ²¡æœ‰ä½¿ç”¨åˆ°å½“å‰çš„ä¸€çº§ç¼“å­˜ï¼Œæ•ˆæœå°±æ˜¯ï¼Œè¿˜éœ€è¦å†å‘æ•°æ®åº“ä¸­å‘èµ·ä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ï¼</p>
<p>1ã€sqlSessionä¸åŒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryUserById</span><span class="params">()</span></span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   SqlSession session2 = MybatisUtils.getSession();</span><br><span class="line">   UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line">   UserMapper mapper2 = session2.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   User user = mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   User user2 = mapper2.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">   session2.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿç»“æœï¼šå‘ç°å‘é€äº†ä¸¤æ¡SQLè¯­å¥ï¼</p>
<p>ç»“è®ºï¼š<strong>æ¯ä¸ªsqlSessionä¸­çš„ç¼“å­˜ç›¸äº’ç‹¬ç«‹</strong></p>
<p>2ã€sqlSessionç›¸åŒï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸åŒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryUserById</span><span class="params">()</span></span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line">   UserMapper mapper2 = session.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   User user = mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   User user2 = mapper2.queryUserById(<span class="number">2</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿç»“æœï¼šå‘ç°å‘é€äº†ä¸¤æ¡SQLè¯­å¥ï¼å¾ˆæ­£å¸¸çš„ç†è§£</p>
<p>ç»“è®ºï¼š<strong>å½“å‰ç¼“å­˜ä¸­ï¼Œä¸å­˜åœ¨è¿™ä¸ªæ•°æ®</strong></p>
<p>3ã€sqlSessionç›¸åŒï¼Œä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œï¼</p>
<p>å¢åŠ æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¿®æ”¹ç”¨æˆ·</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™SQL</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  update user set name = #&#123;name&#125; where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryUserById</span><span class="params">()</span></span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   User user = mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line"></span><br><span class="line">   HashMap map = <span class="keyword">new</span> HashMap();</span><br><span class="line">   map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;kuangshen&quot;</span>);</span><br><span class="line">   map.put(<span class="string">&quot;id&quot;</span>,<span class="number">4</span>);</span><br><span class="line">   mapper.updateUser(map);</span><br><span class="line"></span><br><span class="line">   User user2 = mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line"></span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿç»“æœï¼šæŸ¥è¯¢åœ¨ä¸­é—´æ‰§è¡Œäº†å¢åˆ æ”¹æ“ä½œåï¼Œé‡æ–°æ‰§è¡Œäº†</p>
<p>ç»“è®ºï¼š<strong>å› ä¸ºå¢åˆ æ”¹æ“ä½œå¯èƒ½ä¼šå¯¹å½“å‰æ•°æ®äº§ç”Ÿå½±å“</strong></p>
<p>4ã€sqlSessionç›¸åŒï¼Œæ‰‹åŠ¨æ¸…é™¤ä¸€çº§ç¼“å­˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryUserById</span><span class="params">()</span></span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   User user = mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line"></span><br><span class="line">   session.clearCache();<span class="comment">//æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜</span></span><br><span class="line"></span><br><span class="line">   User user2 = mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line"></span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªmap</p>
<hr>
<h4 id="äºŒçº§ç¼“å­˜ï¼ˆéœ€è¦æ‰‹åŠ¨é…ç½®ï¼‰"><a href="#äºŒçº§ç¼“å­˜ï¼ˆéœ€è¦æ‰‹åŠ¨é…ç½®ï¼‰" class="headerlink" title="äºŒçº§ç¼“å­˜ï¼ˆéœ€è¦æ‰‹åŠ¨é…ç½®ï¼‰"></a>äºŒçº§ç¼“å­˜ï¼ˆéœ€è¦æ‰‹åŠ¨é…ç½®ï¼‰</h4><ul>
<li><p>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</p>
</li>
<li><p>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›</p>
</li>
<li><p>å·¥ä½œæœºåˆ¶</p>
</li>
<li><ul>
<li><p>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</p>
</li>
<li><p>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</p>
</li>
<li><p>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</p>
</li>
<li><p>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</p>
</li>
</ul>
</li>
</ul>
<h5 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h5><p>1ã€å¼€å¯å…¨å±€ç¼“å­˜ ã€mybatis-config.xmlã€‘</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€å»æ¯ä¸ªmapper.xmlä¸­é…ç½®ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œè¿™ä¸ªé…ç½®éå¸¸ç®€å•ï¼›ã€xxxMapper.xmlã€‘</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">å®˜æ–¹ç¤ºä¾‹=====&gt;æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag"> <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">size</span>=<span class="string">&quot;512&quot;</span></span></span><br><span class="line"><span class="tag"> <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚</span><br></pre></td></tr></table></figure>



<h5 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h5><ul>
<li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨åŒä¸€ä¸ªMapperä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨äºŒçº§ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®</li>
<li>æŸ¥å‡ºçš„æ•°æ®éƒ½ä¼šè¢«é»˜è®¤å…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­</li>
<li><strong>åªæœ‰ä¼šè¯æäº¤æˆ–è€…å…³é—­ä»¥å</strong>ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ‰ä¼šè½¬åˆ°äºŒçº§ç¼“å­˜ä¸­</li>
</ul>
<hr>
<h4 id="ç¼“å­˜åŸç†å›¾"><a href="#ç¼“å­˜åŸç†å›¾" class="headerlink" title="ç¼“å­˜åŸç†å›¾"></a>ç¼“å­˜åŸç†å›¾</h4><p><img src="https://raw.githubusercontent.com/CooperXJ/ImageBed/master/img/20200805155548" alt="img"></p>
<hr>
<h4 id="è‡ªå®šä¹‰é…ç½®ç¼“å­˜"><a href="#è‡ªå®šä¹‰é…ç½®ç¼“å­˜" class="headerlink" title="è‡ªå®šä¹‰é…ç½®ç¼“å­˜"></a>è‡ªå®šä¹‰é…ç½®ç¼“å­˜</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span> = <span class="string">â€œorg.acme.FooMapperâ€</span> &gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span> = <span class="string">â€œorg.mybatis.caches.ehcache.EhcacheCacheâ€</span> /&gt;</span>  é€‰æ‹©è‡ªå·±æƒ³è¦çš„ç¼“å­˜ç§ç±»</span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cooperxj.github.io/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%A2%9E%E5%88%A0%E6%94%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cooper">
      <meta itemprop="description" content="è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cooper Notes">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%A2%9E%E5%88%A0%E6%94%B9/" class="post-title-link" itemprop="url">å¢åˆ æ”¹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-01-07 08:43:38" itemprop="dateCreated datePublished" datetime="2022-01-07T08:43:38+08:00">2022-01-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-02-13 08:39:59" itemprop="dateModified" datetime="2021-02-13T08:39:59+08:00">2021-02-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis/" itemprop="url" rel="index"><span itemprop="name">Mybatis</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%A2%9E%E5%88%A0%E6%94%B9/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/01/07/Spring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Mybatis/%E5%A2%9E%E5%88%A0%E6%94%B9/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>167</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>1 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å¯¹äº<strong>å¢åˆ æ”¹</strong>çš„æ“ä½œï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶å¿…é¡»æäº¤äº‹åŠ¡ï¼Œä¹Ÿå°±æ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session.commit(); <span class="comment">//æäº¤äº‹åŠ¡,é‡ç‚¹!ä¸å†™çš„è¯ä¸ä¼šæäº¤åˆ°æ•°æ®åº“</span></span><br></pre></td></tr></table></figure>

<p>è¿™å¥è¯å¦‚æœä¸å†™çš„è¯ï¼Œæ•°æ®åº“ä¸­å°†ä¸ä¼šæœ‰å¢åˆ æ”¹çš„æ“ä½œ</p>
<p>ä¹Ÿå¯ä»¥åœ¨åˆ©ç”¨**sqlSessionFactory.openSession(true)**è¿™æ ·çš„è¯å¯ä»¥åœ¨è·å–sessionçš„æ—¶å€™å°±è‡ªåŠ¨æ‰“å¼€äº†è‡ªåŠ¨æäº¤äº‹åŠ¡çš„åŠŸèƒ½</p>

      
    </div>

    
    
    
      

      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Cooper</p>
  <div class="site-description" itemprop="description">è®°å½•ä¸€äº›å­¦ä¹ ç¬”è®°ã€å°è¯´ã€éšç¬”</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">341</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">49</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">75</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CooperXJ" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;CooperXJ" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1789023580@qq.com" title="E-Mail â†’ mailto:1789023580@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cooper</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">648k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">9:49</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'rOzi1T6uncSYNdx0tp1owOzV-gzGzoHsz',
      appKey     : 'Fk3s6CQBK042e1QltClHnTBP',
      placeholder: "ç•™ä¸‹é‚®ç®±ï¼Œæœ‰å›å¤æ—¶ä½ å°†æ”¶åˆ°æé†’ï¼Œé‚®ç®±ä¸ä¼šè¢«å…¬å¼€",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
